webpackJsonp([2,0],{0:function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}var a=n(12),s=i(a),o=n(463),r=(i(o),n(465)),l=i(r),u=n(40),c=i(u);n(7),n(15),n(330),s.default.config.ignoredElements=["game","help","gestures","design","product","chat","noty","goods","buy","profile","order"],n(331),n(457);var h={install:function(t,e){t.myGlobalMethod=function(){return console.log(e),"aaaa"},t.prototype.$myMethod=function(t){return console.log(t,e),"bbbb"},t.prototype.$isDev=e.dev}};window.target_player=null,s.default.use(h,{dev:!1}),window.vm=new s.default({el:"#app",template:"<App/>",components:{App:l.default}}),c.default.init()},7:function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var a=n(278),s=i(a),o=new LokiIndexedAdapter,r=void 0;e.default=new s.default(function(t,e){if(r)t(r);else var n=new loki("bazaar.db",{adapter:o,autoload:!0,autoloadCallback:function(){r={products:n.getCollection("product")?n.getCollection("product"):n.addCollection("product"),chat_log:n.getCollection("chat_log")?n.getCollection("chat_log"):n.addCollection("chat_log"),gestures:n.getCollection("gestures")?n.getCollection("gestures"):n.addCollection("gestures"),notification:n.getCollection("notification")?n.getCollection("notification"):n.addCollection("notification")},t(r)},autosave:!0,autosaveInterval:1e3})})},15:function(t,e,n){(function(t){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var a=n(22),s=i(a),o=n(23),r=i(o),l=n(129),u=i(l),c=n(437),h=i(c),d=n(40),f=i(d),p=n(7),v=i(p),_=n(54),m=i(_),g=n(1),y=function(){function e(){(0,s.default)(this,e),"undefined"!=typeof io&&(this.sock=io(),this.sock.on("connect",this.on_connect.bind(this)),this.sock.on("new_player_online",this.on_new_player_online.bind(this)),this.sock.on("player_offline",this.on_player_offline.bind(this)),this.sock.on("player_move",this.on_player_move.bind(this)),this.sock.on("stop_move",this.on_stop_move.bind(this)),this.sock.on("speak_to_all",this.on_recieve_chat.bind(this)),this.sock.on("speak_to_target",this.on_recieve_chat.bind(this)),this.sock.on("notify_seller_status",this.on_notify_seller_status.bind(this)),this.sock.on("get_target_goods",this.on_get_target_goods.bind(this)),this.sock.on("system_notification",this.on_system_notification.bind(this)))}return(0,r.default)(e,[{key:"register_ui_evt",value:function(){var t=this;vm.$on("notify_seller_status",function(e){t.emit("notify_seller_status",e)})}},{key:"on_system_notification",value:function(t){v.default.then(function(e){e.notification.insert({dt:g().format("YYYY-MM-DD HH:mm:ss"),content:t}),new m.default({layout:"center",timeout:3e3,text:t}).show(),vm.$emit("refresh_sys_noty",""),vm.$emit("refresh_order_status","")})}},{key:"on_notify_seller_status",value:function(t){var e=f.default.get_player_by_id(t.openid);e&&e.show_sign(t.seller)}},{key:"on_get_target_goods",value:function(t,e){v.default.then(function(t){var n=t.products.find({});e(n)})}},{key:"on_connect",value:function(){}},{key:"get_orders",value:function(t,e){this.emit("get_orders",t,function(t){e(t)})}},{key:"post_online",value:function(e){var n=this;v.default.then(function(i){var a=i.products.findOne({}),s=t.extend(wi,e.get_loc());a&&(s.seller=!0),n.emit("player_online",s,function(t){console.log("当前在线："+t.length+"人"),window.vm.$emit("count_changed",t.length);var e=(0,h.default)(t,f.default.player_infos(),"openid");(0,u.default)(e,function(t){return f.default.new_player(t)})}),n.register_ui_evt()})}},{key:"on_recieve_chat",value:function(t){var e=/http/i.test(t.headimgurl)?t.headimgurl:"res/hi0.jpg";new m.default({layout:"center",timeout:3e3,text:'<div style="display:flex;"><img width=40 height=40 src="'+e+'"/><div>'+t.from+"说:"+t.content+"</div></div>"}).show(),v.default.then(function(e){e.chat_log.insert(t),vm.$emit("refresh_chat_log","")})}},{key:"emit",value:function(t,e,n){this.sock&&this.sock.emit(t,e,n)}},{key:"on_new_player_online",value:function(t){f.default.new_player(t),window.vm.$emit("count_changed",f.default.players.length)}},{key:"on_player_offline",value:function(t){f.default.remove_player(t.openid),window.vm.$emit("count_changed",f.default.players.length)}},{key:"on_player_move",value:function(t){console.log("on_player_move p",t);var e=f.default.get_player_by_id(t.openid);console.log("on_player_move t",e),e&&(e.translate(t.x,t.y),e.move(t.dx,t.dy))}},{key:"on_stop_move",value:function(t){var e=f.default.get_player_by_id(t.openid);e&&(e.translate(t.x,t.y),e.stop_move())}}]),e}();e.default=new y}).call(e,n(9))},40:function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var a=n(22),s=i(a),o=n(23),r=i(o),l=n(438),u=i(l),c=n(439),h=i(c),d=n(446),f=i(d),p=n(129),v=i(p),_=n(434),m=i(_),g=n(81),y=i(g),w=n(272),b=i(w),k=n(15),C=i(k),j=n(56),x=i(j),M=void 0,P=function(){function t(){var e=this;(0,s.default)(this,t),this.players=[],this.robots=[],this.fps=60,this.map=new BMap.Map("allmap");var n=new BMap.Point(x.default.getRandFloat(112.745,112.746),x.default.getRandFloat(27.238,27.239));this.map.centerAndZoom(n,19),(0,m.default)(wi,{x:n.lng,y:n.lat});var i=this.new_player(wi);this.map.setCurrentCity("南岳"),this.map.mplayer=this.mplayer=i,this.cam=this.worldCamera(),C.default.post_online(this.mplayer),this.spawn_robots(),setInterval(function(){return e.update()},1e3/this.fps)}return(0,r.default)(t,[{key:"spawn_robots",value:function(){this.destroy_robots();for(var t=0;t<2e3;++t){var e={openid:"robot"+t,nickname:"路人甲"+t,sex:"1",language:"中文",city:"长沙",province:"湖南",country:"中国",headimgurl:"res/hi0.jpg"},n=new BMap.Point(x.default.getRandFloat(112.7,112.79),x.default.getRandFloat(27.2,27.29));(0,m.default)(e,{x:n.lng,y:n.lat});var i=new b.default(this.map,e);this.robots.push(i)}}},{key:"destroy_robots",value:function(){(0,v.default)(this.robots,function(t){t.vanish()}),this.robots=[]}},{key:"worldCamera",value:function(){return M={follow:function(t){t.set_center()}}}},{key:"update",value:function(){this.cam.follow(this.mplayer),(0,v.default)(this.players,function(t){return t.update.call(t)}),(0,v.default)(this.robots,function(t){return t.update.call(t)})}},{key:"player_infos",value:function(){return(0,f.default)(this.players,function(t){return t.wi})}},{key:"get_player_by_id",value:function(t){return(0,h.default)(this.players,function(e){return e.wi.openid==t})}},{key:"test_hit",value:function(t,e){var n=(0,h.default)(this.players,function(n){return n.test_hit(t,e)});return n&&n.on_hit(),n}},{key:"new_player",value:function(t){var e=new y.default(this.map,t);return this.players.push(e),e}},{key:"remove_player",value:function(t){this.players=(0,u.default)(this.players,function(e){return e.wi.openid!=t||(e.vanish(),!1)})}},{key:"init",value:function(){}}]),t}();e.default=new P},56:function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={getRandFloat:function(t,e){return Math.random()*(e-t)+t},getRandInt:function(t,e){return Math.floor(Math.random()*(e-t+1))+t}}},57:function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function a(t,e){this.X=t,this.Y=e}function s(t,e,n,i){this.X=t,this.Y=e,this.Width=n,this.Height=i}function o(t,e,n){this.Name=t,this.Comments=n||"",this.Points=u(e,F),this.points=j(this.Points);var i=c(this.Points);this.Points=h(this.Points,-i),this.Points=d(this.Points,$),this.Points=f(this.Points,R),this.Vector=p(this.Points)}function r(t,e){this.Name=t,this.Score=e}function l(){this.Unistrokes=[],this.Recognize=function(t,e){t=u(t,F);var n=c(t);t=h(t,-n),t=d(t,$),t=f(t,R);for(var i=p(t),a=+(1/0),s=-1,o=0;o<this.Unistrokes.length;o++){var l;l=e?v(this.Unistrokes[o].Vector,i):_(t,this.Unistrokes[o],-z,+z,O),l<a&&(a=l,s=o)}return s==-1?new r("No match.",0):new r(this.Unistrokes[s].Name,e?1/a:1-a/N)},this.IsEmpty=function(){return 0==this.Unistrokes.length},this.Clear=function(){this.Unistrokes.length=0},this.DeleteByName=function(t){this.Unistrokes=this.Unistrokes.filter(function(e){return e.Name!=t})},this.StringifyGestures=function(){for(var t=[],e=0;e<this.Unistrokes.length;e++)t.push({name:this.Unistrokes[e].Name,points:this.Unistrokes[e].points,comments:this.Unistrokes[e].Comments});return(0,M.default)(t)},this.ParseInGestures=function(t){try{for(var e=JSON.parse(t),n=0;n<e.length;n++)this.Unistrokes.push(new o(e[n].name,e[n].points,e[n].comments))}catch(t){console.log("ParseInGestures failed",t)}},this.GetUnistroke=function(t){for(var e=0;e<this.Unistrokes.length;e++)if(this.Unistrokes[e].Name==t)return this.Unistrokes[e]},this.GetUnistrokes=function(){return this.Unistrokes},this.UpdateGesture=function(t,e,n){for(var i=0;i<this.Unistrokes.length;i++)if(this.Unistrokes[i].Name==t)return this.Unistrokes[i]=new o(t,e,n),"updated";if(i==this.Unistrokes.length)return this.Unistrokes[this.Unistrokes.length]=new o(t,e,n),"added"},this.AddGesture=function(t,e){this.Unistrokes[this.Unistrokes.length]=new o(t,e);for(var n=0,i=0;i<this.Unistrokes.length;i++)this.Unistrokes[i].Name==t&&n++;return n},this.DeleteUserGestures=function(){return this.Unistrokes.length=P,P},this.GetGesturePoints=function(t,e,n){var i=[];return this.Unistrokes.forEach(function(e){e.Name==t&&(i=e.points)}),e&&(i=d(i,e)),n&&(i=f(i,n)),i}}function u(t,e){for(var n=b(t)/(e-1),i=0,s=new Array(t[0]),o=1;o<t.length;o++){var r=k(t[o-1],t[o]);if(i+r>=n){var l=t[o-1].X+(n-i)/r*(t[o].X-t[o-1].X),u=t[o-1].Y+(n-i)/r*(t[o].Y-t[o-1].Y),c=new a(l,u);s[s.length]=c,t.splice(o,0,c),i=0}else i+=r}return s.length==e-1&&(s[s.length]=new a(t[t.length-1].X,t[t.length-1].Y)),s}function c(t){var e=g(t);return Math.atan2(e.Y-t[0].Y,e.X-t[0].X)}function h(t,e){for(var n=g(t),i=Math.cos(e),s=Math.sin(e),o=new Array,r=0;r<t.length;r++){var l=(t[r].X-n.X)*i-(t[r].Y-n.Y)*s+n.X,u=(t[r].X-n.X)*s+(t[r].Y-n.Y)*i+n.Y;o[o.length]=new a(l,u)}return o}function d(t,e){for(var n=y(t),i=new Array,s=0;s<t.length;s++){var o=t[s].X*(e/n.Width),r=t[s].Y*(e/n.Height);i[i.length]=new a(o,r)}return i}function f(t,e){for(var n=g(t),i=new Array,s=0;s<t.length;s++){var o=t[s].X+e.X-n.X,r=t[s].Y+e.Y-n.Y;i[i.length]=new a(o,r)}return i}function p(t){for(var e=0,n=new Array,i=0;i<t.length;i++)n[n.length]=t[i].X,n[n.length]=t[i].Y,e+=t[i].X*t[i].X+t[i].Y*t[i].Y;for(var a=Math.sqrt(e),i=0;i<n.length;i++)n[i]/=a;return n}function v(t,e){for(var n=0,i=0,a=0;a<t.length;a+=2)n+=t[a]*e[a]+t[a+1]*e[a+1],i+=t[a]*e[a+1]-t[a+1]*e[a];var s=Math.atan(i/n);return Math.acos(n*Math.cos(s)+i*Math.sin(s))}function _(t,e,n,i,a){for(var s=U*n+(1-U)*i,o=m(t,e,s),r=(1-U)*n+U*i,l=m(t,e,r);Math.abs(i-n)>a;)o<l?(i=r,r=s,l=o,s=U*n+(1-U)*i,o=m(t,e,s)):(n=s,s=r,o=l,r=(1-U)*n+U*i,l=m(t,e,r));return Math.min(o,l)}function m(t,e,n){var i=h(t,n);return w(i,e.Points)}function g(t){for(var e=0,n=0,i=0;i<t.length;i++)e+=t[i].X,n+=t[i].Y;return e/=t.length,n/=t.length,new a(e,n)}function y(t){for(var e=+(1/0),n=-(1/0),i=+(1/0),a=-(1/0),o=0;o<t.length;o++)e=Math.min(e,t[o].X),i=Math.min(i,t[o].Y),n=Math.max(n,t[o].X),a=Math.max(a,t[o].Y);return new s(e,i,n-e,a-i)}function w(t,e){for(var n=0,i=0;i<t.length;i++)n+=k(t[i],e[i]);return n/t.length}function b(t){for(var e=0,n=1;n<t.length;n++)e+=k(t[n-1],t[n]);return e}function k(t,e){var n=e.X-t.X,i=e.Y-t.Y;return Math.sqrt(n*n+i*i)}function C(t){return t*Math.PI/180}function j(t){return JSON.parse((0,M.default)(t))}Object.defineProperty(e,"__esModule",{value:!0});var x=n(83),M=i(x),P=16,F=64,$=250,R=new a(0,0),Y=Math.sqrt($*$+$*$),N=.5*Y,z=C(45),O=C(2),U=.5*(-1+Math.sqrt(5)),X=new l;e.default=X},81:function(t,e,n){(function(t){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var a=n(274),s=i(a),o=n(84),r=i(o),l=n(22),u=i(l),c=n(23),h=i(c),d=n(86),f=i(d),p=n(85),v=i(p),_=n(133),m=i(_),g=n(271),y=i(g),w=n(15),b=i(w),k=n(56),C=i(k),j=function(e){function n(t,e){(0,u.default)(this,n);var i=(0,f.default)(this,(n.__proto__||(0,r.default)(n)).call(this));i.wi=e,i.vx=i.vy=0,i.position=new BMap.Point(e.x,e.y),i._width=64,i._height=64,i.states={up:1,left:10,down:19,right:28,walkUp:[2,9],walkLeft:[11,18],walkDown:[20,27],walkRight:[29,36]};var a=[i.states.up,i.states.left,i.states.down,i.states.right];return i.last_face2=a[C.default.getRandInt(0,3)],i.can_play_anim=!0,i.fatigue_tm=null,i.map=t,i.in_map=!1,i.is_main_player()&&i.map.addOverlay(i),i.draw_slowly=(0,m.default)(i.draw.bind(i),250),i}return(0,v.default)(n,e),(0,h.default)(n,[{key:"initialize",value:function(e){var n=document.createElement("div");n.id=this.wi.openid,t(n).css({background:"url(res/walkcycle.png) no-repeat","text-align":"center",position:"absolute"}),n.style.width=this._width+"px",n.style.height=this._height+"px",n.style.zIndex="9",this.div=n,this.map=e,e.getPanes().markerPane.appendChild(n);var i=/http/i.test(this.wi.headimgurl)?this.wi.headimgurl:"res/hi0.jpg";return t(n).append('<img src="'+i+'" style="display:inline-block;width:45px;height:36px;"/>'),this.ani=new y.default(n,{direction:"vh",framerate:15,width:64,height:64}),this.in_map=!0,n}},{key:"animate",value:function(){return 0==this.vx&&0==this.vy?(this.stop_ani(this.last_face2),void(this.can_play_anim=!0)):void(this.vx>0?this.vx>Math.abs(this.vy)?(this.can_play_anim||this.last_face2!=this.states.right)&&(this.ani_walk_right(),this.last_face2=this.states.right,this.can_play_anim=!1):this.vy>0?(this.can_play_anim||this.last_face2!=this.states.up)&&(this.ani_walk_up(),this.last_face2=this.states.up,this.can_play_anim=!1):(this.can_play_anim||this.last_face2!=this.states.down)&&(this.ani_walk_down(),this.last_face2=this.states.down,this.can_play_anim=!1):Math.abs(this.vx)>Math.abs(this.vy)?(this.can_play_anim||this.last_face2!=this.states.left)&&(this.ani_walk_left(),this.last_face2=this.states.left,this.can_play_anim=!1):this.vy>0?(this.can_play_anim||this.last_face2!=this.states.up)&&(this.ani_walk_up(),this.last_face2=this.states.up,this.can_play_anim=!1):(this.can_play_anim||this.last_face2!=this.states.down)&&(this.ani_walk_down(),this.last_face2=this.states.down,this.can_play_anim=!1))}},{key:"stop_ani",value:function(t){this.ani.clearLoopBetween(),this.ani.gotoAndStop(t)}},{key:"face_up",value:function(){this.ani.gotoAndStop(1)}},{key:"face_left",value:function(){this.ani.gotoAndStop(10)}},{key:"face_down",value:function(){this.ani.gotoAndStop(19)}},{key:"face_right",value:function(){this.ani.gotoAndStop(28)}},{key:"ani_walk_up",value:function(){this.ani.loopBetween(2,9).play(!0)}},{key:"ani_walk_left",value:function(){this.ani.loopBetween(11,18).play(!0)}},{key:"ani_walk_down",value:function(){this.ani.loopBetween(20,27).play(!0)}},{key:"ani_walk_right",value:function(){this.ani.loopBetween(29,36).play(!0)}},{key:"draw",value:function(){var t=this.map.pointToOverlayPixel(this.position);this.div.style.left=t.x-this.width/2+"px",this.div.style.top=t.y-this.height/2+"px"}},{key:"pixel2LngLat",value:function(t,e){var n=this.map.getBounds().toSpan().lng/this.map.getSize().width,i=this.map.getBounds().toSpan().lat/this.map.getSize().height;return{lng:t*n,lat:e*i}}},{key:"is_nearby_mplayer",value:function(){var t=this.map.mplayer.position,e=this.map.getBounds().toSpan(),n=e.lng/2+e.lng/4,i=e.lat/2+e.lat/4;return Math.abs(this.position.lng-t.lng)<n&&Math.abs(this.position.lat-t.lat)<i}},{key:"update",value:function(){this.is_main_player()?(this.animate(),this.do_move(),window.vm.$emit("player_coordinate",this.get_loc())):this.is_nearby_mplayer()?this.in_map?(this.animate(),this.do_move()):this.map.addOverlay(this):this.vanish()}},{key:"vanish",value:function(){this.in_map&&(this.map.removeOverlay(this),this.in_map=!1)}},{key:"set_center",value:function(){this.map.setCenter(this.position)}},{key:"get_loc",value:function(){return{x:this.position.lng,y:this.position.lat}}},{key:"on_hit",value:function(){if(this.is_main_player()){this.stop_move();var t=this.get_loc();t.openid=this.wi.openid,b.default.emit("stop_move",t)}window.vm.$emit("show_header",this.wi)}},{key:"test_hit",value:function(t,e){var n=this.x,i=this.x+this.width,a=this.y,s=this.y+this.height,o=t>n&&t<i&&e>a&&e<s;return o}},{key:"do_move",value:function(){if(0!=this.vx||0!=this.vy){var t=this.pixel2LngLat(this.vx,this.vy);this.position.lng+=t.lng,this.position.lat+=t.lat,this.is_main_player()?this.draw():this.draw_slowly()}}},{key:"is_main_player",value:function(){return this.wi.openid===wi.openid}},{key:"translate",value:function(t,e){this.position.lng=t,this.position.lat=e}},{key:"stop_move",value:function(){this.vx=this.vy=0}},{key:"move",value:function(t,e){var n=Math.sqrt(t*t+e*e);t/=n,e/=n*-1,this.vy=2*e,this.vx=2*t;var i=this;clearTimeout(this.fatigue_tm),function t(){i.vx=Math.abs(i.vx)>.5?Math.max(0,Math.abs(i.vx)-.1)*(0,s.default)(i.vx):0,i.vy=Math.abs(i.vy)>.5?Math.max(0,Math.abs(i.vy)-.1)*(0,s.default)(i.vy):0,Math.abs(i.vx)>0||Math.abs(i.vy)>0?i.fatigue_tm=setTimeout(t,1e3):console.log("this.vx,this.vy all == 0")}()}},{key:"init",value:function(){}},{key:"pos",get:function(){var e=t(this.div).offset();return{x:e.left,y:e.top}}},{key:"x",get:function(){var e=t(this.div).offset();return e.left}},{key:"y",get:function(){var e=t(this.div).offset();return e.top}},{key:"width",get:function(){return t(this.div).width()},set:function(e){e&&t(this.div).width(e)}},{key:"height",get:function(){return t(this.div).height()},set:function(e){e&&t(this.div).height(e)}}]),n}(BMap.Overlay);e.default=j}).call(e,n(9))},82:function(t,e,n){(function(t){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function a(t,e){this.X=t,this.Y=e}function s(){f.default.then(function(e){var n=e.gestures.findOne({});n?(h.default.ParseInGestures(n.gestures),console.log("load gestures from db; length="+h.default.Unistrokes.length)):t.get("/circle/static/default_gestures.txt",function(t,n){"success"==n?(h.default.ParseInGestures(t),e.gestures.insert({gestures:t}),console.log("load gestures from ajax")):new v.default({layout:"center",timeout:3e3,text:"获取默认手势失败:"+n}).show()})})}Object.defineProperty(e,"__esModule",{value:!0});var o=n(22),r=i(o),l=n(23),u=i(l),c=n(57),h=i(c),d=n(7),f=i(d),p=n(54),v=i(p);s();var _=function(){function e(t,n){(0,r.default)(this,e),this.points=[],this.dealer=n,this.canvas=t,this.context=t.getContext("2d"),this.isDrawing=!1,this.init()}return(0,u.default)(e,[{key:"clear",value:function(){this.points.length=0,this.context.clearRect(0,0,this.canvas.width,this.canvas.height)}},{key:"touchstart",value:function(t){this.context.beginPath(),this.context.moveTo(t.x,t.y),this.isDrawing=!0,this.points.push(new a(t.x,t.y)),this.dealer&&this.dealer.touchstart&&this.dealer.touchstart(this)}},{key:"touchmove",value:function(t){this.isDrawing&&(this.context.lineTo(t.x,t.y),this.context.stroke(),this.points.push(new a(t.x,t.y)))}},{key:"touchend",value:function(t){if(this.isDrawing){if(this.touchmove(t),this.isDrawing=!1,this.points.length>=10){var e=h.default.Recognize(this.points,!1);e.Score>.85&&this.dealer&&this.dealer[e.Name]?this.dealer[e.Name](e,this.points):this.dealer&&this.dealer.no_recognize&&this.dealer.no_recognize(this.points)}else this.dealer&&this.dealer.few_touch&&this.dealer.few_touch(this.points,this.last_evt);this.dealer&&this.dealer.touchend&&this.dealer.touchend(this)}}},{key:"draw_stroke",value:function(t){this.clear(),this.context.beginPath();var e={X:this.canvas.width/2,Y:this.canvas.height/2+5},n=Math.min(this.canvas.width,this.canvas.height),i=h.default.GetGesturePoints(t,n,e);this.context.moveTo(i[0].X,i[0].Y);for(var a=1;a<i.length;++a)this.context.lineTo(i[a].X,i[a].Y),this.context.stroke();this.points=i}},{key:"draw",value:function(e){var n=null;e.offsetX,e.offsetY;switch(e.type){case"mousedown":this.last_evt=e,e.touches=[],e.touches[0]={pageX:e.pageX,pageY:e.pageY},n="touchstart";break;case"mousemove":e.touches=[],e.touches[0]={pageX:e.pageX,pageY:e.pageY},n="touchmove";break;case"mouseup":e.touches=[],e.touches[0]={pageX:e.pageX,pageY:e.pageY},n="touchend"}var i,a=t(e.target).offset();if("touchend"===e.type)i={x:e.changedTouches[0].pageX-a.left,y:e.changedTouches[0].pageY-a.top};else{this.last_evt=e;e.touches[0].target;i={x:e.touches[0].pageX-a.left,y:e.touches[0].pageY-a.top}}n=n||e.type,this[n](i)}},{key:"save",value:function(t,e){h.default.UpdateGesture(t,this.points,e);f.default.then(function(t){var e=h.default.StringifyGestures();t.gestures.remove(t.gestures.find({})),t.gestures.insert({gestures:e})})}},{key:"init",value:function(){var t="createTouch"in document||"ontouchstart"in window;t?(this.canvas.addEventListener("touchstart",this.draw.bind(this),!1),this.canvas.addEventListener("touchmove",this.draw.bind(this),!1),this.canvas.addEventListener("touchend",this.draw.bind(this),!1)):(this.canvas.addEventListener("mousedown",this.draw.bind(this),!1),this.canvas.addEventListener("mousemove",this.draw.bind(this),!1),this.canvas.addEventListener("mouseup",this.draw.bind(this),!1))}}]),e}();e.default=_}).call(e,n(9))},260:function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var a=n(469),s=i(a),o=n(472),r=i(o),l=n(470),u=i(l),c=n(468),h=i(c),d=n(471),f=i(d),p=n(467),v=i(p),_=n(475),m=i(_),g=n(466),y=i(g),w=n(473),b=i(w),k=n(474),C=i(k);e.default={name:"app",data:function(){return{app:phonon.navigator()}},mounted:function(){var t=this;this.$nextTick(function(){phonon.options({navigator:{defaultPage:"game",animatePages:!0,enableBrowserBackButton:!0},i18n:null}),window.setTimeout(function(){t.app.start()},500)})},components:{Game:s.default,Help:r.default,Gestures:u.default,Design:h.default,Goods:f.default,Buy:y.default,Chat:v.default,Profile:m.default,Noty:b.default,Order:C.default}}},261:function(t,e,n){(function(t){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var a=n(83),s=i(a),o=n(12),r=(i(o),n(7)),l=(i(r),n(80)),u=i(l);e.default={name:"BuyPage",props:{app:{type:Object,require:!0}},data:function(){return{goods:[],seller:{}}},mounted:function(){this.app.on({page:"buy",preventClose:!1},this)},methods:{onReady:function(){this.seller=target_player,this.goods=u.default.map(target_player.goods,function(t){return t.count=0,t})},buy:function(){var e=u.default.reduce(this.goods,function(t,e){return t.total+=parseFloat(e.count).toFixed(2)*parseFloat(e.price).toFixed(2),e.count>0&&(t.title+=" "+e.title+"("+e.count+")"),t},{total:0,title:""});return e.total<=0?phonon.alert("所选商品总价必须大于0","请选择商品数量"):(e.total*=100,e.openid=wi.openid,e.buyer_id=wi.openid,e.buyer_nickname=wi.nickname,e.seller_id=this.seller.openid,e.seller_nickname=this.seller.nickname,void t.ajax({type:"POST",url:"buy_product",contentType:"application/json; charset=utf-8",timeout:5e3,data:(0,s.default)(e),dataType:"json"}).done(function(t){return t.ret&&t.ret==-1?alert("下单失败"):void WeixinJSBridge.invoke("getBrandWCPayRequest",t,function(t){"get_brand_wcpay_request:ok"==t.err_msg?phonon.alert("付款成功，请留意系统消息","支付成功"):phonon.alert("用户取消支付","购买失败")})}).fail(function(t){alert("下单失败："+(0,s.default)(t))}))}}}}).call(e,n(9))},262:function(t,e,n){(function(t){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var a=n(12),s=i(a),o=n(1),r=i(o),l=n(7),u=i(l),c=n(15),h=i(c);s.default.directive("tap",{isFn:!0,bind:function(t,e){t.on("tap",e.value)}}),e.default={name:"ChatPage",props:{app:{type:Object,require:!0}},created:function(){var t=this;this.$root.$on("refresh_chat_log",function(e){u.default.then(function(e){t.chat_log=e.chat_log.find({})})})},data:function(){return{chat_log:[],target:"所有人",content:""}},mounted:function(){this.app.on({page:"chat",preventClose:!1},this)},methods:{headimgurl:function(t){return/http/i.test(t)?t:"res/hi0.jpg"},clear:function(){var t=this;u.default.then(function(e){e.chat_log.remove(e.chat_log.find({})),t.chat_log=e.chat_log.find({})})},send:function(t){var e=this;(this.content||t)&&u.default.then(function(n){var i={from:wi.nickname,to:e.target,headimgurl:wi.headimgurl,img:t,content:e.content,dt:(0,r.default)().format("YYYY-MM-DD HH:mm:ss")};"所有人"==i.to?h.default.emit("speak_to_all",i):(i.target_oid=window.target_player.openid,h.default.emit("speak_to_target",i)),n.chat_log.insert(i),e.content="",e.chat_log=n.chat_log.find({})})},onReady:function(){var t=this;this.target=window.target_player?window.target_player.nickname:"所有人",u.default.then(function(e){t.chat_log=e.chat_log.find({})})},open_img:function(){t('input[type="file"]').click()},processFile:function(t){var e=this;if(0!=t.target.files.length){var n=t.target.files[0],i=new FileReader;i.onload=function(t){var n=new Image(400,400);n.src=t.target.result,n.onload=function(){e.send(e.resize2_img(n))}},i.readAsDataURL(n)}},resize2_img:function(t){var e=document.createElement("canvas");e.width=t.width,e.height=t.height;var n=e.getContext("2d");return n.clearRect(0,0,e.width,e.height),n.drawImage(t,0,0,t.width,t.height),e.toDataURL("image/png")}}}}).call(e,n(9))},263:function(t,e,n){(function(t){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var a=n(12),s=i(a),o=n(57),r=i(o),l=n(82),u=i(l);s.default.directive("tap",{isFn:!0,bind:function(t,e){t.on("tap",e.value)}}),e.default={name:"DesignPage",props:{app:{type:Object,require:!0}},data:function(){return{strokeName:"",comments:"",dirty:!1}},mounted:function(){var t=this;this.app.on({page:"design",preventClose:!0},this);var e=document.querySelector("#design .content canvas"),n=e.parentNode.getBoundingClientRect();e.width=n.width,e.height=n.height;var i={touchstart:function(e){e.clear(),t.dirty=!0}};this.reg_canvas=new u.default(e,i)},methods:{onReady:function(){t("body").on("touchmove",function(t){t.preventDefault()})},onClose:function(t){if(this.dirty){var e=phonon.confirm("手势尚未保存，确认放弃修改吗？","确认离开？",!0,"放弃修改","取消");e.on("confirm",function(){t.close()})}else t.close()},onHidden:function(){t("body").off("touchmove"),this.dirty=!1,this.reg_canvas.clear(),this.comments=""},onHashChanged:function(t){this.strokeName=decodeURIComponent(t),this.stroke=r.default.GetUnistroke(this.strokeName),this.comments=this.stroke.Comments,this.reg_canvas.draw_stroke(this.stroke.Name)},onSave:function(t){this.dirty&&(this.strokeName&&this.comments?(this.dirty=!1,this.reg_canvas.save(this.strokeName,this.comments),phonon.alert(this.strokeName+" 手势已保存","保存成功",!0,"确定")):phonon.alert("名称或备注不能为空","请填写信息",!0,"确定"))}}}}).call(e,n(9))},264:function(t,e,n){(function(t){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var a=n(273),s=i(a),o=n(82),r=i(o),l=n(40),u=i(l);e.default={name:"GamePage",props:{app:{type:Object,require:!0}},data:function(){return{online_count:0,show_head_panel:!1,cur_x:0,cur_y:0,info:"",wi:{openid:"",nickname:"",sex:"",language:"",city:"",province:"",country:"",headimgurl:""}}},computed:{headimgurl:function(){return/http/i.test(this.wi.headimgurl)?this.wi.headimgurl:"res/hi0.jpg"}},created:function(){var t=this;this.$root.$on("debug_info",function(e){t.info=e}),this.$root.$on("player_coordinate",function(e){t.cur_x=parseFloat(e.x).toFixed(5),t.cur_y=parseFloat(e.y).toFixed(5)}),this.$root.$on("show_header",function(e){window.target_player=e,t.show_header(e)}),this.$root.$on("count_changed",function(e){t.online_count=e+u.default.robots.length})},methods:{clear_target:function(){this.show_head_panel=!1,window.target_player=null},show_profile:function(){phonon.navigator().changePage("profile","")},show_header:function(t){this.show_head_panel=!0,this.wi=t},goHelp:function(){phonon.navigator().changePage("help","margherita")},onReady:function(){t("body").on("touchmove",function(t){t.preventDefault()})},onClose:function(t){alert("onClose"),t.close()},onHidden:function(){t("body").off("touchmove")}},mounted:function(){this.app.on({page:"game",preventClose:!1,content:null},this);var t=document.querySelector("#game_main .content canvas");this.reg_canvas=new r.default(t,s.default);var e=t.parentNode.getBoundingClientRect();t.width=e.width,t.height=e.height}}}).call(e,n(9))},265:function(t,e,n){(function(t){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var a=n(12),s=(i(a),n(57)),o=i(s),r=n(7),l=i(r);e.default={name:"GesturesPage",props:{app:{type:Object,require:!0}},created:function(){this.recognizer=o.default},data:function(){return{strokes:[]}},computed:{libs:function(){return this.recognizer.StringifyGestures()}},mounted:function(){this.app.on({page:"gestures",preventClose:!1,content:null},this)},methods:{get_default_gestures:function(){var e=this;t.get("/circle/static/default_gestures.txt",function(t,n){"success"==n?(o.default.Clear(),o.default.ParseInGestures(t),l.default.then(function(e){e.gestures.remove(e.gestures.find({})),e.gestures.insert({gestures:t})}),e.onReady(),phonon.alert("恢复默认手持成功","手势已重置")):alert("获取默认手势失败:"+n)})},save_gestures:function(){var e=this.recognizer.StringifyGestures();t.ajax({type:"POST",url:"save_gestures",contentType:"application/json; charset=utf-8",timeout:5e3,data:e,dataType:"text"}).done(function(t){phonon.notif("手势保存成功",3e3,!0,"取消")}).fail(function(t){})},delete_stroke:function(t){this.recognizer.DeleteByName(t),this.onReady()},onReady:function(){var t=this;this.strokes=this.recognizer.GetUnistrokes().slice(0),this.$nextTick(function(){t.drawStrokes()})},goDesign:function(t){phonon.navigator().changePage("design",t)},drawStrokes:function(){var t=this;this.recognizer.GetUnistrokes().forEach(function(e){var n=document.getElementById(e.Name),i=n.getContext("2d");i.clearRect(0,0,n.width,n.height),i.beginPath();var a={X:125,Y:130},s=t.recognizer.GetGesturePoints(e.Name,200,a);i.moveTo(s[0].X,s[0].Y);for(var o=1;o<s.length;++o)i.lineTo(s[o].X,s[o].Y),i.stroke()})}}}}).call(e,n(9))},266:function(t,e,n){(function(t){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var a=n(12),s=i(a),o=n(7),r=i(o);s.default.directive("tap",{isFn:!0,bind:function(t,e){t.on("tap",e.value)}}),e.default={name:"GoodsPage",props:{app:{type:Object,require:!0}},data:function(){return{goods:[],newItem:!1,new_title:"",new_comments:"",new_img:"",new_price:0}},mounted:function(){this.app.on({page:"goods",preventClose:!1},this)},methods:{onReady:function(){var t=this;r.default.then(function(e){t.goods=e.products.find({}),0==t.goods.length?t.$root.$emit("notify_seller_status",{openid:wi.openid,seller:null}):t.$root.$emit("notify_seller_status",{openid:wi.openid,seller:!0})})},open_img:function(){t('input[type="file"]').click()},processFile:function(t){var e=this;if(0!=t.target.files.length){var n=t.target.files[0],i=new FileReader;i.onload=function(t){e.new_img=t.target.result},i.readAsDataURL(n)}},addGoods:function(){var e=this,n=t("#new_img")[0];if(""==n.getAttribute("src"))return void phonon.alert("商品图片不能为空","请填写商品信息");if(this.new_price=parseFloat(this.new_price).toFixed(2),!this.new_title||!this.new_comments||this.new_price<=0)return void phonon.alert("商品 （名称、备注） 不能为空；价格需大于0","请填写商品信息");this.newItem=!1,this.goods=this.goods.splice(0);var i={title:this.new_title,comments:this.new_comments,price:this.new_price,img:this.resize2_img(n)};r.default.then(function(t){t.products.insert(i),e.onReady()})},saveGoods:function(t){var e=this;console.log(t),r.default.then(function(n){n.products.findAndUpdate({$loki:t.$loki},function(e){return t}),phonon.alert("商品信息修改成功","除了图片"),e.onReady()})},delete_item:function(t){var e=this;r.default.then(function(n){n.products.remove(t),e.onReady()})},resize2_img:function(t){var e=document.createElement("canvas");e.width=t.width,e.height=t.height;var n=e.getContext("2d");return n.clearRect(0,0,e.width,e.height),n.drawImage(t,0,0,t.width,t.height),e.toDataURL("image/png")}}}}).call(e,n(9))},267:function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{
value:!0});var a=n(12),s=i(a);s.default.directive("tap",{isFn:!0,bind:function(t,e){t.on("tap",e.value)}}),e.default={name:"HelpPage",props:{app:{type:Object,require:!0}},data:function(){return{pizza:"",action:null}},mounted:function(){this.app.on({page:"help",preventClose:!1},this)},methods:{}}},268:function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var a=n(12),s=(i(a),n(7)),o=i(s),r=n(80);i(r);e.default={name:"NotyPage",props:{app:{type:Object,require:!0}},created:function(){var t=this;this.$root.$on("refresh_sys_noty",function(e){o.default.then(function(e){t.msgs=e.notification.find({})})})},data:function(){return{msgs:[]}},mounted:function(){this.app.on({page:"noty",preventClose:!1},this)},methods:{onReady:function(){var t=this;o.default.then(function(e){t.msgs=e.notification.find({})})}}}},269:function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var a=n(15),s=i(a),o=n(7),r=(i(o),n(80));i(r);e.default={name:"OrderPage",props:{app:{type:Object,require:!0}},created:function(){var t=this;this.$root.$on("refresh_order_status",function(e){s.default.get_orders(wi.openid,function(e){return t.orders=e})})},data:function(){return{orders:[],state_dealer:null}},mounted:function(){this.app.on({page:"order",preventClose:!1},this)},methods:{onReady:function(){var t=this;s.default.get_orders(wi.openid,function(e){return t.orders=e})},get_caption:function(t){return"已付款"==t.status&&t.seller_id==wi.openid?(this.state_dealer=function(){s.default.emit("change_order_status",{oid:t.oid,to_status:"已发货"})},"发货"):"已发货"==t.status&&t.buyer_id==wi.openid?(this.state_dealer=function(){s.default.emit("change_order_status",{oid:t.oid,to_status:"已完成"})},"确认收货"):(this.state_dealer=null,"")},do_action:function(t){this.state_dealer&&this.state_dealer()}}}},270:function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var a=n(12);i(a);e.default={name:"ProfilePage",props:{app:{type:Object,require:!0}},data:function(){return{player:{}}},computed:{headimgurl:function(){return/http/i.test(this.player.headimgurl)?this.player.headimgurl:"res/hi0.jpg"}},mounted:function(){this.app.on({page:"profile",preventClose:!1},this)},methods:{onReady:function(){this.player=target_player},onClose:function(t){},onHidden:function(){},onHashChanged:function(t){}}}},271:function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var a=n(22),s=i(a),o=n(23),r=i(o),l=function(){function t(e,n){(0,s.default)(this,t);var i=this,a=e.toString();i.elmts="[object Array]"===a||"[object NodeList]"===a||"[object HTMLCollection]"===a||"[object Object]"===a?e:[e],a=null,i.playing=!1,i.framerate=n.framerate||25,i.frames=[],i.loop=!1,i.elmtsLength=i.elmts.length,i.stopCallback=n.stopCallback||null,i.firstFrame=1,i.lastFrame=1,i._label="",i._idx=0,i._timer=null,i._tmpFrames=[],i._way=1,i._framesNumber=n.frames_number||0,i.updateFrames(n.frames,n.direction,n.width,n.height,n.frames_number)}return(0,r.default)(t,[{key:"_render",value:function(){for(var t=this.elmtsLength,e=this;t--;)this.elmts[t].style.backgroundPosition=this._tmpFrames[this._idx];if(e.playing)if(e._idx>=e.lastFrame-1){if(!e.loop)return void e.stop();e._idx=e.firstFrame-1}else e._idx++}},{key:"_enterFrame",value:function(){var t=this;t._render.call(t),t.playing&&(t._timer=setTimeout(function(){t._enterFrame.call(t)},1e3/t.framerate))}},{key:"_calculateFrames",value:function(){if(this._tmpFrames=[],1===this._way)this._tmpFrames=this.frames;else for(var t=this.frames.length;t--;)this._tmpFrames.push(this.frames[t]);return this._framesNumber=this.frames.length,this.clearLoopBetween()}},{key:"_cacheFrames",value:function(){var t=this.frames,e=t.length;for(this.frames=[];e--;)this.frames[e]="-"+t[e].x+"px -"+t[e].y+"px";return this}},{key:"updateFrames",value:function(t,e,n,i,a){if("vh"===e&&n&&i){var s=(this.elmts[0],n),o=i,r=576/s,l=256/o,u=0,c=r*l;console.log(c);for(var h=0;h<c;h++){var d,f;d=h%r*s,f=Math.floor(h/r)*o,u&&u>0&&(d+=u+u*h%r,f+=u+u*Math.floor(h/r)),this.frames.push({x:d,y:f})}return this._cacheFrames()._calculateFrames()}if(t)return this.frames=t,this._cacheFrames()._calculateFrames();if(!t&&!e)throw"AniClip need at least frames array or a direction ";if("v"===e&&!i)throw"If you want to use a vertical sprite, JSMoviclip need a height";if("h"===e&&!n)throw"If you want to use a horizontal sprite, JSMoviclip need a width";if(!a)throw"If you want to use a horizontal of vertical sprite, JSMoviclip need a number of frame";for(var h=0;h<a;h++)this.frames.push({x:"h"===e?h*n:0,y:"v"===e?h*i:0});return h=null,this._cacheFrames()._calculateFrames()}},{key:"getWay",value:function(){return this._way}},{key:"changeWay",value:function(t,e){return t===this._way?this:(e=!!e,e===!0&&(this._idx=this._framesNumber-this._idx),this._way=t,this._calculateFrames())}},{key:"clearLoopBetween",value:function(){return this.firstFrame=1,this.lastFrame=this._framesNumber,this}},{key:"loopBetween",value:function(t,e){if(t>=e)throw t=e,"Firstframe and lastframe are equals or inverted";return this.firstFrame=Math.max(t,1),this.lastFrame=Math.min(e,this._framesNumber),(this._idx<this.firstFrame-1||this._idx>this.lastFrame-1)&&(this._idx=this.firstFrame-1),this}},{key:"currentFrame",value:function(){return this._idx+1}},{key:"prevFrame",value:function(){var t=this.currentFrame();return this.gotoAndStop(t<=this.firstFrame?this.lastFrame:t-1)}},{key:"nextFrame",value:function(){var t=this.currentFrame();return this.gotoAndStop(t>=this.lastFrame?1:t+1)}},{key:"toggle",value:function(t){return this.playing?this.stop():this.play(t)}},{key:"play",value:function(t){return this.playing?this:(this._idx===this.lastFrame-1&&(this._idx=this.firstFrame-1),this.playing=!0,this.loop=!!t,this._enterFrame(),this)}},{key:"stop",value:function(){return this.playing=!1,this._timer&&(clearTimeout(this._timer),this._timer=null),this.stopCallback&&this.stopCallback(),this}},{key:"gotoAndPlay",value:function(t,e){return this._idx=Math.min(Math.max(t,this.firstFrame),this.lastFrame)-1,this.play(e)}},{key:"gotoAndStop",value:function(t){return this._idx=Math.min(Math.max(t,this.firstFrame),this.lastFrame)-1,this.loop=!1,this.playing=!1,this._enterFrame(),this}}]),t}();e.default=l},272:function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var a=n(84),s=i(a),o=n(22),r=i(o),l=n(23),u=i(l),c=n(86),h=i(c),d=n(85),f=i(d),p=n(133),v=i(p),_=n(1),m=i(_),g=n(54),y=i(g),w=n(15),b=(i(w),n(56)),k=i(b),C=n(81),j=i(C),x=n(7),M=i(x),P=["人事一朝尽，荒芜三径休。始闻漳浦卧，奄作岱宗游。","池水犹含墨，风云已落秋。今宵泉壑里，何处觅藏舟。","彭泽先生柳，山阴道士鹅。我来从所好，停策汉阴多。","重以观鱼乐，因之鼓枻歌。崔徐迹未朽，千载揖清波。","带雪梅初暖，含烟柳尚青。来窥童子偈，得听法王经。","会理知无我，观空厌有形。迷心应觉悟，客思未遑宁。","给园支遁隐，虚寂养身和。春晚群木秀，间关黄鸟歌。","林栖居士竹，池养右军鹅。炎月北窗下，清风期再过。","义公习禅处，结构依空林。户外一峰秀，阶前群壑深。","夕阳连雨足，空翠落庭阴。看取莲花净，应知不染心。","白鹤青岩半，幽人有隐居。阶庭空水石，林壑罢樵渔。","岁月青松老，风霜苦竹疏。睹兹怀旧业，回策返吾庐。","精舍买金开，流泉绕砌回。芰荷薰讲席，松柏映香台。","法雨晴飞去，天花昼下来。谈玄殊未已，归骑夕阳催。","池上青莲宇，林间白马泉。故人成异物，过客独潸然。","既礼新松塔，还寻旧石筵。平生竹如意，犹挂草堂前。","与君园庐并，微尚颇亦同。耕钓方自逸，壶觞趣不空。","门无俗士驾，人有上皇风。何处先贤传，惟称庞德公。","弱岁早登龙，今来喜再逢。如何春月柳，犹忆岁寒松。","烟火临寒食，笙歌达曙钟。喧喧斗鸡道，行乐羡朋从。","闻就庞公隐，移居近洞湖。兴来林是竹，归卧谷名愚。","挂席樵风便，开轩琴月孤。岁寒何用赏，霜落故园芜。","府僚能枉驾，家酝复新开。落日池上酌，清风松下来。","厨人具鸡黍，稚子摘杨梅。谁道山公醉，犹能骑马回。","二月湖水清，家家春鸟鸣。林花扫更落，径草踏还生。","酒伴来相命，开尊共解酲。当杯已入手，歌妓莫停声。","我爱陶家趣，园林无俗情。春雷百卉坼，寒食四邻清。","伏枕嗟公干，归山羡子平。年年白社客，空滞洛阳城。","故人具鸡黍，邀我至田家。绿树村边合，青山郭外斜。","开筵面场圃，把酒话桑麻。待到重阳日，还来就菊花。","山公能饮酒，居士好弹筝。世外交初得，林中契已并。","纳凉风飒至，逃暑日将倾。便就南亭里，馀尊惜解酲。","北阙休上书，南山归敝庐。不才明主弃，多病故人疏。","白发催年老，青阳逼岁除。永怀愁不寐，松月夜窗虚。","樵牧南山近，林闾北郭赊。先人留素业，老圃作邻家。","不种千株橘，惟资五色瓜。邵平能就我，开径剪蓬麻。","家本洞湖上，岁时归思催。客心徒欲速，江路苦邅回。","残冻因风解，新正度腊开。行看武昌柳，仿佛映楼台。","挂席东南望，青山水国遥。舳舻争利涉，来往接风潮。","问我今何去，天台访石桥。坐看霞色晓，疑是赤城标。","皇皇三十载，书剑两无成。山水寻吴越，风尘厌洛京。","扁舟泛湖海，长揖谢公卿。且乐杯中物，谁论世上名。","已失巴陵雨，犹逢蜀坂泥。天开斜景遍，山出晚云低。","馀湿犹沾草，残流尚入溪。今宵有明月，乡思远凄凄。","远游经海峤，返棹归山阿。日夕见乔木，乡关在伐柯。","愁随江路尽，喜入郢门多。左右看桑土，依然即匪他。","日暮马行疾，城荒人住稀。听歌知近楚，投馆忽如归。","鲁堰田畴广，章陵气色微。明朝拜嘉庆，须著老莱衣。","他乡逢七夕，旅馆益羁愁。不见穿针妇，空怀故国楼。","绪风初减热，新月始临秋。谁忍窥河汉，迢迢问斗牛。","星罗牛渚夕，风退鹢舟迟。浦溆尝同宿，烟波忽间之。","榜歌空里失，船火望中疑。明发泛潮海，茫茫何处期。"],F=function(t){function e(t,n){(0,r.default)(this,e);var i=(0,h.default)(this,(e.__proto__||(0,s.default)(e)).call(this,t,n)),a=1e3*k.default.getRandInt(2,10);return setTimeout(i.roaming.bind(i),a),a=1e3*k.default.getRandInt(3,1800),setTimeout(i.babble.bind(i),a),i}return(0,f.default)(e,t),(0,u.default)(e,[{key:"roaming",value:function(){var t=k.default.getRandFloat(-1,1),e=k.default.getRandFloat(-1,1);this.move(t,e);var n=1e3*k.default.getRandInt(2,10);setTimeout(this.roaming.bind(this),n)}},{key:"babble",value:function(){e.speak_of_throttle(this);var t=1e3*k.default.getRandInt(60,3600);setTimeout(this.babble.bind(this),t)}}],[{key:"speak_of",value:function(t){var e=k.default.getRandInt(0,P.length-1),n={from:t.wi.nickname,to:"所有人",headimgurl:t.wi.headimgurl,content:P[e],dt:(0,m.default)().format("YYYY-MM-DD HH:mm:ss")};new y.default({layout:"center",timeout:3e3,text:'<div style="display:flex;"><img width=40 height=40 src="'+n.headimgurl+'"/><div>'+n.from+"说:"+n.content+"</div></div>"}).show(),M.default.then(function(t){t.chat_log.insert(n),vm.$emit("refresh_chat_log","")})}}]),e}(j.default);F.speak_of_throttle=(0,v.default)(F.speak_of,4e3),e.default=F},273:function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var a=n(40),s=i(a),o=n(15),r=i(o),l=n(54);i(l);e.default={"帮助":function(t,e){phonon.navigator().changePage("help","")},"聊天":function(t,e){phonon.navigator().changePage("chat","")},"商品":function(t,e){phonon.navigator().changePage("goods","")},"购买":function(t,e){return target_player?void(target_player.seller?r.default.emit("get_target_goods",target_player.openid,function(t){target_player.goods=t,phonon.navigator().changePage("buy","")}):phonon.alert("对方不是卖家","无商品可买")):void phonon.alert("未选择购买目标","请先选择玩家")},"订单":function(t,e){phonon.navigator().changePage("order","")},"通知":function(t,e){phonon.navigator().changePage("noty","")},"手势":function(t,e){phonon.navigator().changePage("gestures","")},no_recognize:function(t){console.log("in no_recognize"),t[t.length-1].X||t.pop();var e=t[0],n=t[t.length-1],i=n.X-e.X,a=n.Y-e.Y;s.default.mplayer.move(i,a);var o=s.default.mplayer.get_loc();o.openid=wi.openid,o.dx=i,o.dy=a,r.default.emit("player_move",o)},few_touch:function(t,e){t[t.length-1].X||t.pop();var n=t[t.length-1];s.default.test_hit(n.X,n.Y)},touchstart:function(t){},touchend:function(t){t.clear()}}},330:function(t,e){},331:function(t,e){},332:function(t,e){},333:function(t,e){},334:function(t,e){},335:function(t,e){},336:function(t,e){},337:function(t,e){},338:function(t,e){},339:function(t,e){},340:function(t,e){},341:function(t,e){},342:function(t,e){},455:function(t,e,n){function i(t){return n(a(t))}function a(t){return s[t]||function(){throw new Error("Cannot find module '"+t+"'.")}()}var s={"./af":135,"./af.js":135,"./ar":142,"./ar-dz":136,"./ar-dz.js":136,"./ar-kw":137,"./ar-kw.js":137,"./ar-ly":138,"./ar-ly.js":138,"./ar-ma":139,"./ar-ma.js":139,"./ar-sa":140,"./ar-sa.js":140,"./ar-tn":141,"./ar-tn.js":141,"./ar.js":142,"./az":143,"./az.js":143,"./be":144,"./be.js":144,"./bg":145,"./bg.js":145,"./bm":146,"./bm.js":146,"./bn":147,"./bn.js":147,"./bo":148,"./bo.js":148,"./br":149,"./br.js":149,"./bs":150,"./bs.js":150,"./ca":151,"./ca.js":151,"./cs":152,"./cs.js":152,"./cv":153,"./cv.js":153,"./cy":154,"./cy.js":154,"./da":155,"./da.js":155,"./de":158,"./de-at":156,"./de-at.js":156,"./de-ch":157,"./de-ch.js":157,"./de.js":158,"./dv":159,"./dv.js":159,"./el":160,"./el.js":160,"./en-au":161,"./en-au.js":161,"./en-ca":162,"./en-ca.js":162,"./en-gb":163,"./en-gb.js":163,"./en-ie":164,"./en-ie.js":164,"./en-nz":165,"./en-nz.js":165,"./eo":166,"./eo.js":166,"./es":169,"./es-do":167,"./es-do.js":167,"./es-us":168,"./es-us.js":168,"./es.js":169,"./et":170,"./et.js":170,"./eu":171,"./eu.js":171,"./fa":172,"./fa.js":172,"./fi":173,"./fi.js":173,"./fo":174,"./fo.js":174,"./fr":177,"./fr-ca":175,"./fr-ca.js":175,"./fr-ch":176,"./fr-ch.js":176,"./fr.js":177,"./fy":178,"./fy.js":178,"./gd":179,"./gd.js":179,"./gl":180,"./gl.js":180,"./gom-latn":181,"./gom-latn.js":181,"./gu":182,"./gu.js":182,"./he":183,"./he.js":183,"./hi":184,"./hi.js":184,"./hr":185,"./hr.js":185,"./hu":186,"./hu.js":186,"./hy-am":187,"./hy-am.js":187,"./id":188,"./id.js":188,"./is":189,"./is.js":189,"./it":190,"./it.js":190,"./ja":191,"./ja.js":191,"./jv":192,"./jv.js":192,"./ka":193,"./ka.js":193,"./kk":194,"./kk.js":194,"./km":195,"./km.js":195,"./kn":196,"./kn.js":196,"./ko":197,"./ko.js":197,"./ky":198,"./ky.js":198,"./lb":199,"./lb.js":199,"./lo":200,"./lo.js":200,"./lt":201,"./lt.js":201,"./lv":202,"./lv.js":202,"./me":203,"./me.js":203,"./mi":204,"./mi.js":204,"./mk":205,"./mk.js":205,"./ml":206,"./ml.js":206,"./mr":207,"./mr.js":207,"./ms":209,"./ms-my":208,"./ms-my.js":208,"./ms.js":209,"./my":210,"./my.js":210,"./nb":211,"./nb.js":211,"./ne":212,"./ne.js":212,"./nl":214,"./nl-be":213,"./nl-be.js":213,"./nl.js":214,"./nn":215,"./nn.js":215,"./pa-in":216,"./pa-in.js":216,"./pl":217,"./pl.js":217,"./pt":219,"./pt-br":218,"./pt-br.js":218,"./pt.js":219,"./ro":220,"./ro.js":220,"./ru":221,"./ru.js":221,"./sd":222,"./sd.js":222,"./se":223,"./se.js":223,"./si":224,"./si.js":224,"./sk":225,"./sk.js":225,"./sl":226,"./sl.js":226,"./sq":227,"./sq.js":227,"./sr":229,"./sr-cyrl":228,"./sr-cyrl.js":228,"./sr.js":229,"./ss":230,"./ss.js":230,"./sv":231,"./sv.js":231,"./sw":232,"./sw.js":232,"./ta":233,"./ta.js":233,"./te":234,"./te.js":234,"./tet":235,"./tet.js":235,"./th":236,"./th.js":236,"./tl-ph":237,"./tl-ph.js":237,"./tlh":238,"./tlh.js":238,"./tr":239,"./tr.js":239,"./tzl":240,"./tzl.js":240,"./tzm":242,"./tzm-latn":241,"./tzm-latn.js":241,"./tzm.js":242,"./uk":243,"./uk.js":243,"./ur":244,"./ur.js":244,"./uz":246,"./uz-latn":245,"./uz-latn.js":245,"./uz.js":246,"./vi":247,"./vi.js":247,"./x-pseudo":248,"./x-pseudo.js":248,"./yo":249,"./yo.js":249,"./zh-cn":250,"./zh-cn.js":250,"./zh-hk":251,"./zh-hk.js":251,"./zh-tw":252,"./zh-tw.js":252};i.keys=function(){return Object.keys(s)},i.resolve=a,t.exports=i,i.id=455},465:function(t,e,n){n(333);var i=n(6)(n(260),n(477),null,null);t.exports=i.exports},466:function(t,e,n){n(340);var i=n(6)(n(261),n(484),"data-v-cb80c40e",null);t.exports=i.exports},467:function(t,e,n){n(334);var i=n(6)(n(262),n(478),"data-v-40a9b575",null);t.exports=i.exports},468:function(t,e,n){n(336);var i=n(6)(n(263),n(480),"data-v-5d32739b",null);t.exports=i.exports},469:function(t,e,n){n(342);var i=n(6)(n(264),n(486),"data-v-fcecdde2",null);t.exports=i.exports},470:function(t,e,n){n(332);var i=n(6)(n(265),n(476),"data-v-2fe35ae7",null);t.exports=i.exports},471:function(t,e,n){n(338);var i=n(6)(n(266),n(482),"data-v-6c8777ee",null);t.exports=i.exports},472:function(t,e,n){n(339);var i=n(6)(n(267),n(483),"data-v-882c5644",null);t.exports=i.exports},473:function(t,e,n){n(335);var i=n(6)(n(268),n(479),"data-v-4a54cb23",null);t.exports=i.exports},474:function(t,e,n){n(337);var i=n(6)(n(269),n(481),"data-v-5f457801",null);t.exports=i.exports},475:function(t,e,n){n(341);var i=n(6)(n(270),n(485),"data-v-e7ba0bc8",null);t.exports=i.exports},476:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("gestures",{attrs:{"data-page":"true"}},[n("header",{staticClass:"header-bar"},[n("button",{staticClass:"btn pull-left icon icon-arrow-back",attrs:{"data-navigation":"$previous-page"}}),t._v(" "),n("div",{staticClass:"center"},[n("h1",{staticClass:"title"},[t._v("手势绑定")])]),t._v(" "),t.$isDev?n("button",{staticClass:"btn pull-right icon icon-add",attrs:{"data-navigation":"design"}}):t._e(),t._v(" "),t.$isDev?n("button",{staticClass:"btn pull-right icon icon-sync with-circle",on:{touchend:function(e){t.save_gestures()}}}):t._e(),t._v(" "),n("button",{staticClass:"btn pull-right",on:{touchend:function(e){t.get_default_gestures()}}},[t._v("恢复默认")])]),t._v(" "),n("div",{staticClass:"content"},[n("ul",{staticClass:"list"},t._l(t.strokes,function(e){return n("li",[n("a",{staticClass:"padded-list"},[n("canvas",{attrs:{id:e.Name,width:"250",height:"250"}}),t._v(" "),n("div",[n("h3",{staticClass:"fit-parent"},[t._v(t._s(e.Name))]),t._v(" "),n("h4",{staticClass:"comments"},[t._v(t._s(e.Comments))]),t._v(" "),n("button",{staticClass:"btn fit-parent primary",on:{touchend:function(n){t.goDesign(e.Name)}}},[t._v("编辑")]),t._v(" "),t.$isDev?n("button",{staticClass:"btn fit-parent negative",on:{touchend:function(n){t.delete_stroke(e.Name)}}},[t._v("删除")]):t._e()])])])}))])])},staticRenderFns:[]}},477:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"app"}},[n("game",{attrs:{app:t.app}}),t._v(" "),n("help",{attrs:{app:t.app}}),t._v(" "),n("gestures",{attrs:{app:t.app}}),t._v(" "),n("design",{attrs:{app:t.app}}),t._v(" "),n("goods",{attrs:{app:t.app}}),t._v(" "),n("buy",{attrs:{app:t.app}}),t._v(" "),n("chat",{attrs:{app:t.app}}),t._v(" "),n("profile",{attrs:{app:t.app}}),t._v(" "),n("noty",{attrs:{app:t.app}}),t._v(" "),n("order",{attrs:{app:t.app}})],1)},staticRenderFns:[]}},478:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("chat",{attrs:{"data-page":"true"}},[n("header",{staticClass:"header-bar"},[n("button",{staticClass:"btn pull-left icon icon-arrow-back",attrs:{"data-navigation":"$previous-page"}}),t._v(" "),n("div",{staticClass:"center"},[n("h1",{staticClass:"title"},[t._v("聊天记录")])]),t._v(" "),n("button",{staticClass:"btn pull-right ",on:{touchend:function(e){t.clear()}}},[t._v("清空")])]),t._v(" "),n("div",{staticClass:"content"},[n("ul",{staticClass:"list"},t._l(t.chat_log,function(e){return n("li",[n("div",{staticClass:"padded-list"},[n("div",[n("img",{staticClass:"headImg",attrs:{src:t.headimgurl(e.headimgurl)}}),n("div",{staticClass:"caption"},[t._v(t._s(e.dt)+" "+t._s(e.from)+"对"),n("i",{staticClass:"target"},[t._v(t._s(e.to))]),t._v("说：")])]),t._v(" "),n("div",[n("div",[t._v(t._s(e.content))]),t._v(" "),e.img?n("img",{staticClass:"pic",attrs:{src:e.img}}):t._e()])])])})),t._v(" "),n("div",{staticClass:"input-wrapper"},[n("div",{staticClass:"prompt"},[t._v("对"),n("i",{staticClass:"target"},[t._v(t._s(t.target))]),t._v("说：")]),t._v(" "),n("input",{directives:[{name:"model",rawName:"v-model",value:t.content,expression:"content"}],attrs:{placeholder:"聊天内容"},domProps:{value:t.content},on:{input:function(e){e.target.composing||(t.content=e.target.value)}}}),t._v(" "),n("input",{attrs:{type:"file"},on:{change:function(e){t.processFile(e)}}}),t._v(" "),n("i",{staticClass:"icon icon-add with-circle",on:{touchend:t.open_img}}),t._v(" "),n("button",{staticClass:"btn primary",on:{touchend:function(e){t.send()}}},[t._v("发送")])])])])},staticRenderFns:[]}},479:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("noty",{attrs:{"data-page":"true"}},[n("header",{staticClass:"header-bar"},[n("button",{staticClass:"btn pull-left icon icon-arrow-back",attrs:{"data-navigation":"$previous-page"}}),t._v(" "),n("div",{staticClass:"center"},[n("h1",{staticClass:"title"},[t._v("系统消息")])])]),t._v(" "),n("div",{staticClass:"content"},[n("ul",{staticClass:"list"},t._l(t.msgs,function(e){return n("li",[n("div",{staticClass:"padded-list"},[n("div",[n("h3",[t._v(t._s(e.dt))])]),t._v(" "),n("p",[t._v(t._s(e.content))])])])}))])])},staticRenderFns:[]}},480:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("design",{attrs:{id:"design","data-page":"true"}},[n("header",{staticClass:"header-bar"},[n("div",{staticClass:"left"},[n("button",{staticClass:"btn pull-left icon icon-arrow-back",attrs:{"data-navigation":"$previous-page"}}),t._v(" "),n("h1",{staticClass:"title"},[t._v("设置手势")])])]),t._v(" "),n("div",{staticClass:"content"},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.strokeName,expression:"strokeName"}],attrs:{type:"text",placeholder:"名称",readonly:!t.$isDev},domProps:{value:t.strokeName},on:{input:function(e){e.target.composing||(t.strokeName=e.target.value)}}}),t._v(" "),n("textarea",{directives:[{name:"model",rawName:"v-model",value:t.comments,expression:"comments"}],attrs:{placeholder:"功能说明文字",readonly:!t.$isDev},domProps:{value:t.comments},on:{input:function(e){e.target.composing||(t.comments=e.target.value)}}}),t._v(" "),n("div",{staticClass:"recognize-area"},[n("canvas")]),t._v(" "),n("button",{staticClass:"btn primary",on:{touchend:t.onSave}},[t._v("保存")])])])},staticRenderFns:[]}},481:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("order",{attrs:{"data-page":"true"}},[n("header",{staticClass:"header-bar"},[n("button",{staticClass:"btn pull-left icon icon-arrow-back",attrs:{"data-navigation":"$previous-page"}}),t._v(" "),n("div",{staticClass:"center"},[n("h1",{staticClass:"title"},[t._v("订单列表")])])]),t._v(" "),n("div",{staticClass:"content"},[n("ul",{staticClass:"list"},t._l(t.orders,function(e){return n("li",[n("div",{staticClass:"order_info"},[n("div",{staticClass:"order_item"},[n("div",[t._v("买家：")]),n("div",{staticClass:"info"},[t._v(t._s(e.buyer_nickname))])]),t._v(" "),n("div",{staticClass:"order_item"},[n("div",[t._v("卖家：")]),n("div",{staticClass:"info"},[t._v(t._s(e.seller_nickname))])]),t._v(" "),n("div",{staticClass:"order_item"},[n("div",[t._v("交易时间：")]),n("div",{staticClass:"info"},[t._v(t._s(e.dt))])]),t._v(" "),n("div",{staticClass:"order_item"},[n("div",[t._v("商品名称：")]),n("div",{staticClass:"info"},[t._v(t._s(e.title))])]),t._v(" "),n("div",{staticClass:"order_item"},[n("div",[t._v("总价：")]),n("div",{staticClass:"info"},[t._v(t._s(e.total))])]),t._v(" "),n("div",{staticClass:"order_item"},[n("div",[t._v("状态：")]),n("div",{staticClass:"info"},[t._v(t._s(e.status))])]),t._v(" "),t.get_caption(e)?n("button",{staticClass:"btn fit-parent positive",on:{touchend:function(n){t.do_action(e)}}},[t._v(t._s(t.get_caption(e)))]):t._e()])])}))])])},staticRenderFns:[]}},482:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("goods",{attrs:{"data-page":"true"}},[n("header",{staticClass:"header-bar"},[n("button",{staticClass:"btn pull-left icon icon-arrow-back",attrs:{"data-navigation":"$previous-page"}}),t._v(" "),n("div",{staticClass:"center"},[n("h1",{staticClass:"title"},[t._v("商品管理")])]),t._v(" "),n("button",{staticClass:"btn pull-right icon icon-add",on:{touchend:function(e){t.newItem=!0}}})]),t._v(" "),n("div",{staticClass:"content"},[t.newItem?n("div",{staticClass:"padded-list"},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.new_title,expression:"new_title"}],attrs:{type:"text",placeholder:"名称"},domProps:{value:t.new_title},on:{input:function(e){e.target.composing||(t.new_title=e.target.value)}}}),t._v(" "),n("textarea",{directives:[{name:"model",rawName:"v-model",value:t.new_comments,expression:"new_comments"}],attrs:{placeholder:"商品描述"},domProps:{value:t.new_comments},on:{input:function(e){e.target.composing||(t.new_comments=e.target.value)}}}),t._v(" "),n("img",{attrs:{id:"new_img",src:t.new_img}}),t._v(" "),n("input",{attrs:{type:"file"},on:{change:function(e){t.processFile(e)}}}),t._v(" "),n("div",{staticClass:"input-wrapper"},[n("div",[t._v("售价:")]),t._v(" "),n("input",{directives:[{name:"model",rawName:"v-model",value:t.new_price,expression:"new_price"}],attrs:{type:"number"},domProps:{value:t.new_price},on:{input:function(e){e.target.composing||(t.new_price=e.target.value)}}}),t._v(" "),n("div",[t._v("（元）")])]),t._v(" "),n("button",{staticClass:"btn fit-parent",on:{touchend:function(e){t.open_img()}}},[t._v("添加图片")]),t._v(" "),n("button",{staticClass:"btn fit-parent primary",on:{touchend:function(e){t.addGoods()}}},[t._v("添加商品")]),t._v(" "),n("button",{staticClass:"btn fit-parent negative",on:{touchend:function(e){t.newItem=!1}}},[t._v("取消")])]):t._e(),t._v(" "),n("ul",{staticClass:"list"},t._l(t.goods,function(e){return n("li",[n("div",{staticClass:"padded-list"},[n("input",{directives:[{name:"model",rawName:"v-model",value:e.title,expression:"g.title"}],attrs:{type:"text",placeholder:"名称"},domProps:{value:e.title},on:{input:function(n){n.target.composing||t.$set(e,"title",n.target.value)}}}),t._v(" "),n("textarea",{directives:[{name:"model",rawName:"v-model",value:e.comments,expression:"g.comments"}],attrs:{placeholder:"商品描述"},domProps:{value:e.comments},on:{input:function(n){n.target.composing||t.$set(e,"comments",n.target.value)}}}),t._v(" "),n("img",{attrs:{src:e.img}}),t._v(" "),n("div",{staticClass:"input-wrapper"},[n("div",[t._v("售价:")]),t._v(" "),n("input",{directives:[{name:"model",rawName:"v-model",value:e.price,expression:"g.price"}],attrs:{type:"number",onclick:"this.select()"},domProps:{value:e.price},on:{input:function(n){n.target.composing||t.$set(e,"price",n.target.value)}}}),t._v(" "),n("div",[t._v("（元）")])]),t._v(" "),n("button",{staticClass:"btn fit-parent primary",on:{touchend:function(n){t.saveGoods(e)}}},[t._v("保存")]),t._v(" "),n("button",{staticClass:"btn fit-parent negative",on:{touchend:function(n){t.delete_item(e)}}},[t._v("删除")])])])}))])])},staticRenderFns:[]}},483:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("help",{attrs:{"data-page":"true"}},[n("header",{staticClass:"header-bar"},[n("div",{staticClass:"left"},[n("button",{staticClass:"btn pull-left icon icon-arrow-back",attrs:{"data-navigation":"$previous-page"}}),t._v(" "),n("h1",{staticClass:"title"},[t._v("使用说明")])])]),t._v(" "),n("div",{staticClass:"content"},[n("div",{staticClass:"padded-full"},[n("h2",[t._v("操作")]),t._v(" "),n("p",[t._v("大部分操作都在主屏幕（也就是游戏界面）上，以划动手势完成。\n        下面说的划哪个字母，只是跟那个字母"),n("i",[t._v("近似的手势")]),t._v("，每个人书写的习惯不同可能会有误差。\n        可以打开手势管理界面自定义习惯的手势操作。")]),t._v(" "),n("h3",[t._v("人物移动")]),t._v(" "),n("p",[t._v("用手指在屏幕上滑动即可控制角色移动，移动的方向与滑动方向一致。点击自身停止移动")]),t._v(" "),n("h3",[t._v("选择玩家")]),t._v(" "),n("p",[t._v("点击玩家角色以选择玩家，被选中的玩家头像会出现在屏幕上方。然后点击玩家头像则会显示玩家信息")]),t._v(" "),n("h3",[t._v("聊天")]),t._v(" "),n("p",[t._v("在屏幕上划个c（for chat, 默认手势）打开聊天界面。如果当前已选中玩家则对玩家私聊，否则就对所有玩家广播")]),t._v(" "),n("h3",[t._v("售卖")]),t._v(" "),n("p",[t._v("在屏幕上划个p（for product, 默认手势）打开商品管理界面。在此可以添加商品名称、描述、图片、价格。\n        玩家的付款先打入智慧旅游账户，买方确认收货后，卖方5个工作日内会收到微信红包，包含售卖的金额（扣除千分之6手续费）。\n        如果买家选择开电子发票，还需额外扣除千分之1费用。")]),t._v(" "),n("h3",[t._v("购买")]),t._v(" "),n("p",[t._v("有商品销售的玩家头上会有个“卖”字，点击选中此玩家后，划b（for buy，默认手势），打开该玩家的产品页面")]),t._v(" "),n("h3",[t._v("订单")]),t._v(" "),n("p",[t._v("在屏幕上划个o（for order, 默认手势）打开订单界面。在此可以查看售卖的订单记录")]),t._v(" "),n("h3",[t._v("系统通知")]),t._v(" "),n("p",[t._v("在屏幕上划个n（for notification, 默认手势）打开系统通知界面。在此可以查看系统通知记录，比如买家支付成功、已发货、已确认收货等")]),t._v(" "),n("h3",[t._v("手势设置")]),t._v(" "),n("p",[t._v("在屏幕上划个g（for gestures, 默认手势）打开手势设置界面。在此可以更改默认手势。编辑手势时需一笔划完，中途不可抬起手指，可以是任意字母、符号、汉字……")]),t._v(" "),n("h3",[t._v("帮助")]),t._v(" "),n("p",[t._v("在屏幕上划个h（for help, 默认手势）打开此帮助界面。在此界面点以下按钮可以跳转到其它各功能界面")]),t._v(" "),n("button",{staticClass:"btn fit-parent padded-bottom primary"}),t._v(" "),n("button",{staticClass:"btn fit-parent padded-bottom",attrs:{"data-navigation":"gestures"}},[t._v("手势设置")]),t._v(" "),n("button",{staticClass:"btn fit-parent padded-bottom",attrs:{"data-navigation":"chat"}},[t._v("聊天记录")]),t._v(" "),n("button",{staticClass:"btn fit-parent padded-bottom",attrs:{"data-navigation":"goods"}},[t._v("商品管理")]),t._v(" "),n("button",{staticClass:"btn fit-parent padded-bottom",attrs:{"data-navigation":"order"}},[t._v("订单查询")]),t._v(" "),n("button",{staticClass:"btn fit-parent padded-bottom",attrs:{"data-navigation":"noty"}},[t._v("系统通知")])])])])},staticRenderFns:[]}},484:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("buy",{attrs:{"data-page":"true"}},[n("header",{staticClass:"header-bar"},[n("button",{staticClass:"btn pull-left icon icon-arrow-back",attrs:{"data-navigation":"$previous-page"}}),t._v(" "),n("div",{staticClass:"center"},[n("h1",{staticClass:"title"},[t._v(t._s(t.seller.nickname)+"的商品")])]),t._v(" "),n("button",{staticClass:"btn pull-right icon icon-add",on:{touchend:function(e){t.newItem=!0}}})]),t._v(" "),n("div",{staticClass:"content"},[n("ul",{staticClass:"list"},t._l(t.goods,function(e){return n("li",[n("div",{staticClass:"padded-list"},[n("div",[n("h2",[t._v(t._s(e.title))])]),t._v(" "),n("p",[t._v(t._s(e.comments))]),t._v(" "),n("img",{attrs:{src:e.img}}),t._v(" "),n("div",[n("h3",[t._v("售价："+t._s(e.price)+"（元）")])]),t._v(" "),n("div",{staticClass:"input-wrapper"},[n("div",[t._v("购买数量：")]),t._v(" "),n("input",{directives:[{name:"model",rawName:"v-model",value:e.count,expression:"g.count"}],attrs:{type:"number",onclick:"this.select()"},domProps:{value:e.count},on:{input:function(n){n.target.composing||t.$set(e,"count",n.target.value)}}})])])])})),t._v(" "),n("button",{staticClass:"btn fit-parent primary",on:{touchend:function(e){t.buy()}}},[t._v("购买")])])])},staticRenderFns:[]}},485:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("profile",{attrs:{id:"profile","data-page":"true"}},[n("header",{staticClass:"header-bar"},[n("div",{staticClass:"left"},[n("button",{staticClass:"btn pull-left icon icon-arrow-back",attrs:{"data-navigation":"$previous-page"}})]),t._v(" "),n("div",{staticClass:"center"},[n("h1",{staticClass:"title"},[t._v("玩家信息")])])]),t._v(" "),n("div",{staticClass:"content"},[n("img",{staticClass:"hiu",attrs:{src:t.headimgurl}}),t._v(" "),n("ul",{staticClass:"list"},[n("li",[n("div",{staticClass:"pull-right"},[t._v("昵称")]),t._v(" "),n("span",{staticClass:"padded-list"},[t._v(t._s(t.player.nickname))])]),t._v(" "),n("li",[n("div",{staticClass:"pull-right"},[t._v("性别")]),t._v(" "),n("span",{staticClass:"padded-list"},[t._v(t._s(t.player.sex))])]),t._v(" "),n("li",[n("div",{staticClass:"pull-right"},[t._v("语言")]),t._v(" "),n("span",{staticClass:"padded-list"},[t._v(t._s(t.player.language))])]),t._v(" "),n("li",[n("div",{staticClass:"pull-right"},[t._v("城市")]),t._v(" "),n("span",{staticClass:"padded-list"},[t._v(t._s(t.player.city))])]),t._v(" "),n("li",[n("div",{staticClass:"pull-right"},[t._v("省份")]),t._v(" "),n("span",{staticClass:"padded-list"},[t._v(t._s(t.player.province))])]),t._v(" "),n("li",[n("div",{staticClass:"pull-right"},[t._v("国家")]),t._v(" "),n("span",{staticClass:"padded-list"},[t._v(t._s(t.player.country))])])])])])},staticRenderFns:[]}},486:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("game",{attrs:{id:"game_main","data-page":"true"}},[n("div",{staticClass:"header"},[t.show_head_panel?n("img",{attrs:{src:t.headimgurl},on:{touchend:t.show_profile}}):t._e(),t._v(" "),t.show_head_panel?n("div",{staticClass:"title"},[t._v(t._s(t.wi.nickname))]):t._e(),t._v(" "),t.show_head_panel&&t.wi.seller?n("div",{staticClass:"title"},[t._v("(商人)")]):t._e(),t._v(" "),t.show_head_panel?n("i",{staticClass:"icon icon-close with-circle",on:{touchend:t.clear_target}}):t._e(),t._v(" "),n("button",{staticClass:"btn icon icon-info-outline with-circle help",attrs:{"data-navigation":"help"}})]),t._v(" "),n("div",{staticClass:"content"},[n("div",{staticClass:"recognize-area"},[n("canvas")])]),t._v(" "),n("div",{staticClass:"footer"},[n("div",[t._v("坐标:"+t._s("("+t.cur_x+", "+t.cur_y+")"))]),t._v(" "),t.info?n("div",{staticClass:"debug"},[t._v("info:"+t._s(t.info))]):t._e(),t._v(" "),n("div",{staticClass:"count"},[t._v("在线人数："+t._s(t.online_count)+"人")])])])},staticRenderFns:[]}},487:function(t,e){}});
//# sourceMappingURL=app.9ee36519d01072e988de.js.map