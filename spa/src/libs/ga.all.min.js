var GA=GA||{};GA.VERSION="0.0.1";GA.plugins=void 0;GA.custom=void 0;
GA.create=function(u,v,w,x,y){function p(){requestAnimationFrame(p,c.canvas);if(void 0===c._fps)q(),c.render(c.canvas,0);else{var a=Date.now(),b=a-c._startTime;1E3<b&&(b=c._frameDuration);c._startTime=a;for(c._lag+=b;c._lag>=c._frameDuration;)z(),q(),c._lag-=c._frameDuration;c.render(c.canvas,c._lag/c._frameDuration)}}function z(){function a(b){b._previousX=b.x;b._previousY=b.y;b.children&&0<b.children.length&&b.children.forEach(function(b){a(b)})}c.stage.children.forEach(function(b){a(b)})}function q(){if(0<
c.buttons.length){c.canvas.style.cursor="auto";for(var a=c.buttons.length-1;0<=a;a--){var b=c.buttons[a];b.update(c.pointer,c.canvas);"over"!==b.state&&"down"!==b.state||b.stage||(c.canvas.style.cursor="pointer")}}c.dragAndDrop&&c.pointer.updateDragAndDrop();c.state&&!c.paused&&c.state();if(0!==c.updateFunctions.length)for(a=0;a<c.updateFunctions.length;a++)(0,c.updateFunctions[a])()}function l(a){a.x=0;a.y=0;a.vx=0;a.vy=0;a.width=0;a.height=0;a.scaleX=1;a.scaleY=1;a.pivotX=.5;a.pivotY=.5;a.rotation=
0;a.visible=!0;a.parent=void 0;a.stage=!1;a.shadow=!1;a.shadowColor="rgba(100, 100, 100, 0.5)";a.shadowOffsetX=3;a.shadowOffsetY=3;a.shadowBlur=3;a.blendMode=void 0;a._alpha=1;a._draggable=void 0;a._layer=0;a._circular=!1;a._interactive=!1;a._previousX=void 0;a._previousY=void 0;a.children=[];a.addChild=function(b){b.parent&&b.parent.removeChild(b);b.parent=a;a.children.push(b)};a.removeChild=function(b){if(b.parent===a)a.children.splice(a.children.indexOf(b),1);else throw Error(b+"is not a child of "+
a);};a.swapChildren=function(b,c){var h=a.children.indexOf(b),g=a.children.indexOf(c);if(-1!==h&&-1!==g)b.childIndex=g,c.childIndex=h,a.children[h]=c,a.children[g]=b;else throw Error(child+" Both objects must be a child of the caller "+a);};a.add=function(b){var c=Array.prototype.slice.call(arguments);1<c.length?c.forEach(function(b){a.addChild(b)}):a.addChild(c[0])};a.remove=function(b){var c=Array.prototype.slice.call(arguments);1<c.length?c.forEach(function(b){a.removeChild(b)}):a.removeChild(c[0])};
a.setPosition=function(b,c){a.x=b;a.y=c};a.putCenter=function(b,c,e){b.x=a.x+a.halfWidth-b.halfWidth+(c||0);b.y=a.y+a.halfHeight-b.halfHeight+(e||0);a.compensateForParentPosition(a,b)};a.putTop=function(b,c,e){b.x=a.x+a.halfWidth-b.halfWidth+(c||0);b.y=a.y-b.height+(e||0);a.compensateForParentPosition(a,b)};a.putRight=function(b,c,e){b.x=a.x+a.width+(c||0);b.y=a.y+a.halfHeight-b.halfHeight+(e||0);a.compensateForParentPosition(a,b)};a.putBottom=function(b,c,e){b.x=a.x+a.halfWidth-b.halfWidth+(c||0);
b.y=a.y+a.height+(e||0);a.compensateForParentPosition(a,b)};a.putLeft=function(b,c,e){b.x=a.x-b.width+(c||0);b.y=a.y+a.halfHeight-b.halfHeight+(e||0);a.compensateForParentPosition(a,b)};a.compensateForParentPosition=function(a,c){if(0!==c.parent.gx||0!==c.parent.gy)c.x-=a.gx,c.y-=a.gy};Object.defineProperties(a,{gx:{get:function(){return this.parent?this.x+this.parent.gx:this.x},enumerable:!0,configurable:!0},gy:{get:function(){return this.parent?this.y+this.parent.gy:this.y},enumerable:!0,configurable:!0},
position:{get:function(){return{x:a.x,y:a.y}},enumerable:!0,configurable:!0},alpha:{get:function(){return a.parent._alpha*a._alpha},set:function(b){a._alpha=b},enumerable:!0,configurable:!0},halfWidth:{get:function(){return a.width/2},enumerable:!0,configurable:!0},halfHeight:{get:function(){return a.height/2},enumerable:!0,configurable:!0},centerX:{get:function(){return a.x+a.halfWidth},enumerable:!0,configurable:!0},centerY:{get:function(){return a.y+a.halfHeight},enumerable:!0,configurable:!0},
layer:{get:function(){return a._layer},set:function(b){a._layer=b;a.parent.children.sort(A)},enumerable:!0,configurable:!0},circular:{get:function(){return a._circular},set:function(b){!0===b&&!1===a._circular&&(r(a),a._circular=!0);!1===b&&!0===a._circular&&(delete a.diameter,delete a.radius,a._circular=!1)},enumerable:!0,configurable:!0},draggable:{get:function(){return a._draggable},set:function(b){!0===b&&(c.draggableSprites.push(a),a._draggable=!0,!1===c.dragAndDrop&&(c.dragAndDrop=!0));!1===
b&&c.draggableSprites.splice(c.draggableSprites.indexOf(a),1)},enumerable:!0,configurable:!0},interactive:{get:function(){return a._interactive},set:function(b){!0===b&&(t(a),a._interactive=!0);!1===b&&(c.buttons.splice(c.buttons.indexOf(a),1),a._interactive=!1)},enumerable:!0,configurable:!0},localBounds:{get:function(){return{x:0,y:0,width:a.width,height:a.height}},enumerable:!0,configurable:!0},globalBounds:{get:function(){return rectangle={x:a.gx,y:a.gy,width:a.gx+a.width,height:a.gy+a.height}},
enumerable:!0,configurable:!0},empty:{get:function(){return 0===a.children.length?!0:!1},enumerable:!0,configurable:!0}})}function r(a){Object.defineProperties(a,{diameter:{get:function(){return a.width},set:function(b){a.width=b;a.height=b},enumerable:!0,configurable:!0},radius:{get:function(){return a.width/2},set:function(b){a.width=2*b;a.height=2*b},enumerable:!0,configurable:!0}})}function t(a){a.press=a.press||void 0;a.release=a.release||void 0;a.over=a.over||void 0;a.out=a.out||void 0;a.tap=
a.tap||void 0;a.state="up";a.action="";a.pressed=!1;a.enabled=!0;a.hoverOver=!1;c.buttons.push(a);a.update=function(b,h){a.enabled&&(h=c.pointer.hitTestSprite(a),b.isUp&&(a.state="up","button"===a.subtype&&a.show(0)),h&&(a.state="over",a.frames&&3===a.frames.length&&"button"===a.subtype&&a.show(1),b.isDown&&(a.state="down","button"===a.subtype&&(3===a.frames.length?a.show(2):a.show(1)))),"down"!==a.state||a.pressed||(a.press&&a.press(),a.pressed=!0,a.action="pressed"),"over"===a.state&&(a.pressed&&
(a.release&&a.release(),a.pressed=!1,a.action="released",c.pointer.tapped&&a.tap&&a.tap()),a.hoverOver||(a.over&&a.over(),a.hoverOver=!0)),"up"===a.state&&(a.pressed&&(a.release&&a.release(),a.pressed=!1,a.action="released"),a.hoverOver&&(a.out&&a.out(),a.hoverOver=!1)))}}function n(a){var b={};b.code=a;b.isDown=!1;b.isUp=!0;b.press=void 0;b.release=void 0;b.downHandler=function(a){a.keyCode===b.code&&(b.isUp&&b.press&&b.press(),b.isDown=!0,b.isUp=!1);a.preventDefault()};b.upHandler=function(a){a.keyCode===
b.code&&(b.isDown&&b.release&&b.release(),b.isDown=!1,b.isUp=!0);a.preventDefault()};c.canvas.addEventListener("keydown",b.downHandler.bind(b),!1);c.canvas.addEventListener("keyup",b.upHandler.bind(b),!1);return b}function A(a,b){return a.layer<b.layer?-1:1}var c={};c.canvas=document.createElement("canvas");c.canvas.setAttribute("width",1*u);c.canvas.setAttribute("height",1*v);c.canvas.style.backgroundColor="black";document.body.appendChild(c.canvas);c.canvas.ctx=c.canvas.getContext("2d");c.stage=function(){var a=
{};l(a);a.stage=!0;a.width=c.canvas.width;a.height=c.canvas.height;a.x=0;a.y=0;a.parent=void 0;return a}();c.pointer=function(){var a={_x:0,_y:0};Object.defineProperties(a,{x:{get:function(){return a._x/c.scale},enumerable:!0,configurable:!0},y:{get:function(){return a._y/c.scale},enumerable:!0,configurable:!0},centerX:{get:function(){return a.x},enumerable:!0,configurable:!0},centerY:{get:function(){return a.y},enumerable:!0,configurable:!0},position:{get:function(){return{x:a.x,y:a.y}},enumerable:!0,
configurable:!0}});a.isDown=!1;a.isUp=!0;a.tapped=!1;a.downTime=0;a.elapsedTime=0;a.press=void 0;a.release=void 0;a.tap=void 0;a.dragSprite=null;a.dragOffsetX=0;a.dragOffsetY=0;a.moveHandler=function(b){a._x=b.pageX-b.target.offsetLeft;a._y=b.pageY-b.target.offsetTop;b.preventDefault()};a.touchmoveHandler=function(b){a._x=b.targetTouches[0].pageX-c.canvas.offsetLeft;a._y=b.targetTouches[0].pageY-c.canvas.offsetTop;b.preventDefault()};a.downHandler=function(b){a._x=b.pageX-b.target.offsetLeft;a._y=
b.pageY-b.target.offsetTop;a.isDown=!0;a.isUp=!1;a.tapped=!1;a.downTime=Date.now();a.press&&a.press();b.preventDefault()};a.touchstartHandler=function(b){a._x=b.targetTouches[0].pageX-c.canvas.offsetLeft;a._y=b.targetTouches[0].pageY-c.canvas.offsetTop;a.isDown=!0;a.isUp=!1;a.tapped=!1;a.downTime=Date.now();a.press&&a.press();b.preventDefault()};a.upHandler=function(b){a.elapsedTime=Math.abs(a.downTime-Date.now());200>=a.elapsedTime&&(a.tapped=!0,a.tap&&a.tap());a.isUp=!0;a.isDown=!1;a.release&&a.release();
b.preventDefault()};c.canvas.addEventListener("mousemove",a.moveHandler.bind(a),!1);c.canvas.addEventListener("mousedown",a.downHandler.bind(a),!1);c.canvas.addEventListener("mouseup",a.upHandler.bind(a),!1);c.canvas.addEventListener("touchmove",a.touchmoveHandler.bind(a),!1);c.canvas.addEventListener("touchstart",a.touchstartHandler.bind(a),!1);c.canvas.addEventListener("touchend",a.upHandler.bind(a),!1);c.canvas.style.touchAction="none";a.hitTestSprite=function(b){if(b.circular){var c=a.x-(b.gx+b.halfWidth),
e=a.y-(b.gy+b.halfHeight);b=Math.sqrt(c*c+e*e)<b.radius}else{c=b.gx+b.width;e=b.gy;var g=b.gy+b.height;b=a.x>b.gx&&a.x<c&&a.y>e&&a.y<g}return b};a.updateDragAndDrop=function(){if(a.isDown)if(null===a.dragSprite)for(var b=c.draggableSprites.length-1;-1<b;b--){var h=c.draggableSprites[b];if(h.draggable&&a.hitTestSprite(h)){a.dragOffsetX=a.x-h.gx;a.dragOffsetY=a.y-h.gy;a.dragSprite=h;b=h.parent.children;b.splice(b.indexOf(h),1);b.push(h);c.draggableSprites.splice(c.draggableSprites.indexOf(h),1);c.draggableSprites.push(h);
break}}else a.dragSprite.x=a.x-a.dragOffsetX,a.dragSprite.y=a.y-a.dragOffsetY;a.isUp&&(a.dragSprite=null);c.draggableSprites.some(function(b){if(b.draggable&&a.hitTestSprite(b))return c.canvas.style.cursor="pointer",!0;c.canvas.style.cursor="auto";return!1})};return a}();c.key=function(){var a={};a.leftArrow=n(37);a.upArrow=n(38);a.rightArrow=n(39);a.downArrow=n(40);a.space=n(32);return a}();c.buttons=[];c.dragAndDrop=!1;c.draggableSprites=[];c.tweens=[];c.state=void 0;c.load=y||void 0;c.setup=w||
void 0;if(void 0===c.setup)throw Error("Please supply the setup function in the constructor");c.assetFilePaths=x||void 0;c.paused=!1;c._fps=60;c._startTime=Date.now();c._frameDuration=1E3/c._fps;c._lag=0;c.interpolate=!0;c.updateFunctions=[];c.scale=1;c.start=function(){c.assetFilePaths?(c.assets.whenLoaded=function(){c.state=void 0;c.setup()},c.assets.load(c.assetFilePaths),c.load&&(c.state=c.load)):c.setup();p()};c.pause=function(){c.paused=!0};c.resume=function(){c.paused=!1};c.hidePointer=function(){c.canvas.style.cursor=
"none"};c.showPointer=function(){c.canvas.style.cursor="auto"};Object.defineProperties(c,{fps:{get:function(){return c._fps},set:function(a){c._fps=a;c._startTime=Date.now();c._frameDuration=1E3/c._fps},enumerable:!0,configurable:!0},backgroundColor:{set:function(a){c.canvas.style.backgroundColor=a},enumerable:!0,configurable:!0}});c.remove=function(a){var b=Array.prototype.slice.call(arguments);if(b[0]instanceof Array){if(b=b[0],0<b.length)for(var c=b.length-1;0<=c;c--){var e=b[c];e.parent.removeChild(e);
b.splice(b.indexOf(e),1)}}else 1<b.length?b.forEach(function(a){a.parent.removeChild(a)}):b[0].parent.removeChild(b[0])};c.group=function(a){var b={};l(b);b.addChild=function(a){a.parent&&a.parent.removeChild(a);a.parent=b;b.children.push(a);b.calculateSize()};b.removeChild=function(a){if(a.parent===b)b.children.splice(b.children.indexOf(a),1);else throw Error(a+"is not a child of "+b);b.calculateSize()};b.calculateSize=function(){0<b.children.length&&(b._newWidth=0,b._newHeight=0,b.children.forEach(function(a){a.x+
a.width>b._newWidth&&(b._newWidth=a.x+a.width);a.y+a.height>b._newHeight&&(b._newHeight=a.y+a.height)}),b.width=b._newWidth,b.height=b._newHeight)};c.stage.addChild(b);a&&Array.prototype.slice.call(arguments).forEach(function(a){b.addChild(a)});return b};c.rectangle=function(a,b,h,e,g,d,f){var k={};l(k);k.mask=!1;k.width=a||32;k.height=b||32;k.fillStyle=h||"red";k.strokeStyle=e||"none";k.lineWidth=g||0;k.x=d||0;k.y=f||0;c.stage.addChild(k);k.render=function(a){a.strokeStyle=k.strokeStyle;a.lineWidth=
k.lineWidth;a.fillStyle=k.fillStyle;a.beginPath();a.rect(-k.width*k.pivotX,-k.height*k.pivotY,k.width,k.height);!0===k.mask?a.clip():("none"!==k.strokeStyle&&a.stroke(),"none"!==k.fillStyle&&a.fill())};return k};c.circle=function(a,b,h,e,g,d){var f={};l(f);f.mask=!1;f.width=a||32;f.height=a||32;f.fillStyle=b||"red";f.strokeStyle=h||"none";f.lineWidth=e||"none";f.x=g||0;f.y=d||0;c.stage.addChild(f);r(f);f.render=function(a){a.strokeStyle=f.strokeStyle;a.lineWidth=f.lineWidth;a.fillStyle=f.fillStyle;
a.beginPath();a.arc(f.radius+-f.diameter*f.pivotX,f.radius+-f.diameter*f.pivotY,f.radius,0,2*Math.PI,!1);!0===f.mask?a.clip():("none"!==f.strokeStyle&&a.stroke(),"none"!==f.fillStyle&&a.fill())};return f};c.line=function(a,b,h,e,g,d){var f={};l(f);h||0===h||(h=0);e||0===e||(e=0);g||0===g||(g=32);d||0===d||(d=32);f.ax=h;f.ay=e;f.bx=g;f.by=d;f.strokeStyle=a||"red";f.lineWidth=b||1;f.lineJoin="round";c.stage.addChild(f);f.render=function(a){a.strokeStyle=f.strokeStyle;a.lineWidth=f.lineWidth;a.lineJoin=
f.lineJoin;a.beginPath();a.moveTo(f.ax,f.ay);a.lineTo(f.bx,f.by);"none"!==f.strokeStyle&&a.stroke();"none"!==f.fillStyle&&a.fill()};return f};c.text=function(a,b,h,e,g){var d={};l(d);d.content=a||"Hello!";d.font=b||"12px sans-serif";d.fillStyle=h||"red";d.textBaseline="top";Object.defineProperties(d,{width:{get:function(){return c.canvas.ctx.measureText(d.content).width},enumerable:!0,configurable:!0},height:{get:function(){return c.canvas.ctx.measureText("M").width},enumerable:!0,configurable:!0}});
c.stage.addChild(d);d.x=e||0;d.y=g||0;d.render=function(a){a.strokeStyle=d.strokeStyle;a.lineWidth=d.lineWidth;a.fillStyle=d.fillStyle;0===d.width&&(d.width=a.measureText(d.content).width);0===d.height&&(d.height=a.measureText("M").width);a.translate(-d.width*d.pivotX,-d.height*d.pivotY);a.font=d.font;a.textBaseline=d.textBaseline;a.fillText(d.content,0,0)};return d};c.frame=function(a,b,c,e,g){var d={};d.image=a;d.x=b;d.y=c;d.width=e;d.height=g;return d};c.frames=function(a,b,c,e){var h={};h.image=
a;h.data=b;h.width=c;h.height=e;return h};c.filmstrip=function(a,b,h,e){var g=c.assets[a].source,d=[],f=g.width/b;g=g.height/h*f;for(var k=0;k<g;k++){var l=k%f*b;var m=Math.floor(k/f)*h;e&&0<e&&(l+=e+e*k%f,m+=e+e*Math.floor(k/f));d.push([l,m])}return c.frames(a,d,b,h)};c.sprite=function(a){var b={};if(void 0===a)throw Error("Sprites require a source");l(b);b.frames=[];b.loop=!0;b._currentFrame=0;b.setTexture=function(a){if(a.image)if(a.image&&!a.data){if(!(c.assets[a.image].source instanceof Image))throw Error(a.image+
" is not an image file");b.source=c.assets[a.image].source;b.sourceX=a.x;b.sourceY=a.y;b.width=a.width;b.height=a.height;b.sourceWidth=a.width;b.sourceHeight=a.height}else a.image&&a.data&&(b.source=c.assets[a.image].source,b.frames=a.data,b.sourceX=b.frames[0][0],b.sourceY=b.frames[0][1],b.width=a.width,b.height=a.height,b.sourceWidth=a.width,b.sourceHeight=a.height);else a instanceof Array?(b.frames=a,b.source=c.assets[a[0]].source,b.sourceX=c.assets[a[0]].frame.x,b.sourceY=c.assets[a[0]].frame.y,
b.width=c.assets[a[0]].frame.w,b.height=c.assets[a[0]].frame.h,b.sourceWidth=c.assets[a[0]].frame.w,b.sourceHeight=c.assets[a[0]].frame.h):(b.tilesetFrame=c.assets[a],b.source=b.tilesetFrame.source,b.sourceX=b.tilesetFrame.frame.x,b.sourceY=b.tilesetFrame.frame.y,b.width=b.tilesetFrame.frame.w,b.height=b.tilesetFrame.frame.h,b.sourceWidth=b.tilesetFrame.frame.w,b.sourceHeight=b.tilesetFrame.frame.h)};b.setTexture(a);b.gotoAndStop=function(a){if(0<b.frames.length)b.frames[0]instanceof Array?(b.sourceX=
b.frames[a][0],b.sourceY=b.frames[a][1]):c.assets[b.frames[a]].frame&&(b.source=c.assets[b.frames[a]].source,b.sourceX=c.assets[b.frames[a]].frame.x,b.sourceY=c.assets[b.frames[a]].frame.y,b.sourceWidth=c.assets[b.frames[a]].frame.w,b.sourceHeight=c.assets[b.frames[a]].frame.h,b.width=c.assets[b.frames[a]].frame.w,b.height=c.assets[b.frames[a]].frame.h),b._currentFrame=a;else throw Error("Frame number "+a+"doesn't exist");};b.x=0;b.y=0;0<b.frames.length&&(c.addStatePlayer(b),Object.defineProperty(b,
"currentFrame",{get:function(){return b._currentFrame},enumerable:!1,configurable:!1}));c.stage.addChild(b);b.render=function(a){a.drawImage(b.source,b.sourceX,b.sourceY,b.sourceWidth,b.sourceHeight,-b.width*b.pivotX,-b.height*b.pivotY,b.width,b.height)};return b};c.button=function(a){a=c.sprite(a);a.subtype="button";t(a);return a};c.image=function(a){return c.assets[a]};c.json=function(a){return c.assets[a]};c.addStatePlayer=function(a){function b(b){e();f=b[0];k=b[1];d=k-f;0===f&&(d+=1,g+=1);1===
d&&(d=2,g+=1);a.fps||(a.fps=12);b=1E3/a.fps;a.gotoAndStop(f);m||(l=setInterval(c.bind(this),b),m=!0)}function c(){g<d?(a.gotoAndStop(a.currentFrame+1),g+=1):a.loop&&(a.gotoAndStop(f),g=1)}function e(){void 0!==l&&!0===m&&(m=!1,d=k=f=g=0,clearInterval(l))}var g=0,d=0,f=0,k=0,l=void 0,m=!1;a.show=function(b){e();"string"!==typeof b?a.gotoAndStop(b):a.gotoAndStop(a.frames.indexOf(b))};a.play=function(){b([0,a.frames.length-1])};a.stop=function(){e();a.gotoAndStop(a.currentFrame)};a.playing=m;a.playSequence=
b};c.render=function(a,b){function h(d){if(d.visible&&d.gx<a.width+d.width&&d.gx+d.width>=-d.width&&d.gy<a.height+d.height&&d.gy+d.height>=-d.height){e.save();c.interpolate?(d.renderX=void 0!==d._previousX?(d.x-d._previousX)*b+d._previousX:d.x,d.renderY=void 0!==d._previousY?(d.y-d._previousY)*b+d._previousY:d.y):(d.renderX=d.x,d.renderY=d.y);e.translate(d.renderX+d.width*d.pivotX,d.renderY+d.height*d.pivotY);e.globalAlpha=d.alpha;e.rotate(d.rotation);e.scale(d.scaleX,d.scaleY);d.shadow&&(e.shadowColor=
d.shadowColor,e.shadowOffsetX=d.shadowOffsetX,e.shadowOffsetY=d.shadowOffsetY,e.shadowBlur=d.shadowBlur);d.blendMode&&(e.globalCompositeOperation=d.blendMode);d.render&&d.render(e);if(d.children&&0<d.children.length){e.translate(-d.width*d.pivotX,-d.height*d.pivotY);for(var f=0;f<d.children.length;f++)h(d.children[f])}e.restore()}}var e=a.ctx;e.clearRect(0,0,a.width,a.height);for(var g=0;g<c.stage.children.length;g++)h(c.stage.children[g])};c.assets={toLoad:0,loaded:0,imageExtensions:["png","jpg",
"gif","webp"],fontExtensions:["ttf","otf","ttc","woff"],audioExtensions:["mp3","ogg","wav","webm"],jsonExtensions:["json"],whenLoaded:void 0,load:function(a){console.log("Loading assets...");var b=this;b.toLoad=a.length;a.forEach(function(a){var e=a.split(".").pop();if(-1!==b.imageExtensions.indexOf(e)){var g=new Image;g.addEventListener("load",function(){g.name=a;b[g.name]={source:g,frame:{x:0,y:0,w:g.width,h:g.height}};b.loadHandler()},!1);g.src=a}else if(-1!==b.fontExtensions.indexOf(e)){e=a.split("/").pop().split(".")[0];
var d=document.createElement("style");d.appendChild(document.createTextNode("@font-face {font-family: '"+e+"'; src: url('"+a+"');}"));document.head.appendChild(d);b.loadHandler()}else if(-1!==b.audioExtensions.indexOf(e))e=c.makeSound(a,b.loadHandler.bind(b)),e.name=a,b[e.name]=e;else if(-1!==b.jsonExtensions.indexOf(e)){var f=new XMLHttpRequest,h={};f.open("GET",a,!0);f.addEventListener("readystatechange",function(){200===f.status&&4===f.readyState&&(h=JSON.parse(f.responseText),h.name=a,b[h.name]=
h,h.frames?b.createTilesetFrames(h,a):b.loadHandler())});f.send()}else console.log("File type not recognized: "+a)})},createTilesetFrames:function(a,b){var c=this,e=b.replace(/[^\/]*$/,""),g=new Image;g.addEventListener("load",function(){c[e+a.meta.image]={source:g,frame:{x:0,y:0,w:g.width,h:g.height}};Object.keys(a.frames).forEach(function(b){c[b]=a.frames[b];c[b].source=g});c.loadHandler()},!1);g.src=e+a.meta.image},loadHandler:function(){this.loaded+=1;console.log(this.loaded);this.toLoad===this.loaded&&
(this.loaded=this.toLoad=0,this.whenLoaded())}};c.keyboard=n;c.makeDisplayObject=l;void 0!==GA.plugins&&GA.plugins(c);void 0!==GA.custom&&GA.custom(c);return c};window.ga=GA.create;

(function(c,w,a){function b(a){a&&!a.setTargetAtTime&&(a.setTargetAtTime=a.setTargetValueAtTime)}window.hasOwnProperty("webkitAudioContext")&&!window.hasOwnProperty("AudioContext")&&(window.AudioContext=webkitAudioContext,AudioContext.prototype.hasOwnProperty("createGain")||(AudioContext.prototype.createGain=AudioContext.prototype.createGainNode),AudioContext.prototype.hasOwnProperty("createDelay")||(AudioContext.prototype.createDelay=AudioContext.prototype.createDelayNode),AudioContext.prototype.hasOwnProperty("createScriptProcessor")||
(AudioContext.prototype.createScriptProcessor=AudioContext.prototype.createJavaScriptNode),AudioContext.prototype.internal_createGain=AudioContext.prototype.createGain,AudioContext.prototype.createGain=function(){var a=this.internal_createGain();b(a.gain);return a},AudioContext.prototype.internal_createDelay=AudioContext.prototype.createDelay,AudioContext.prototype.createDelay=function(a){a=a?this.internal_createDelay(a):this.internal_createDelay();b(a.delayTime);return a},AudioContext.prototype.internal_createBufferSource=
AudioContext.prototype.createBufferSource,AudioContext.prototype.createBufferSource=function(){var a=this.internal_createBufferSource();a.start||(a.start=function(a,d,b){d||b?this.noteGrainOn(a,d,b):this.noteOn(a)});a.stop||(a.stop=a.noteOff);b(a.playbackRate);return a},AudioContext.prototype.internal_createDynamicsCompressor=AudioContext.prototype.createDynamicsCompressor,AudioContext.prototype.createDynamicsCompressor=function(){var a=this.internal_createDynamicsCompressor();b(a.threshold);b(a.knee);
b(a.ratio);b(a.reduction);b(a.attack);b(a.release);return a},AudioContext.prototype.internal_createBiquadFilter=AudioContext.prototype.createBiquadFilter,AudioContext.prototype.createBiquadFilter=function(){var a=this.internal_createBiquadFilter();b(a.frequency);b(a.detune);b(a.Q);b(a.gain);return a},AudioContext.prototype.hasOwnProperty("createOscillator")&&(AudioContext.prototype.internal_createOscillator=AudioContext.prototype.createOscillator,AudioContext.prototype.createOscillator=function(){var a=
this.internal_createOscillator();a.start||(a.start=a.noteOn);a.stop||(a.stop=a.noteOff);b(a.frequency);b(a.detune);return a}))})(window);
(function(c){function w(a,b){var d=c.createEvent("Event");d.initEvent(a,!0,!1);b.dispatchEvent(d)}function a(a){c[h.enabled]=c[g.enabled];c[h.element]=c[g.element];w(h.events.change,a.target)}function b(a){w(h.events.error,a.target)}var d,f={w3:{enabled:"fullscreenEnabled",element:"fullscreenElement",request:"requestFullscreen",exit:"exitFullscreen",events:{change:"fullscreenchange",error:"fullscreenerror"}},webkit:{enabled:"webkitIsFullScreen",element:"webkitCurrentFullScreenElement",request:"webkitRequestFullScreen",
exit:"webkitCancelFullScreen",events:{change:"webkitfullscreenchange",error:"webkitfullscreenerror"}},moz:{enabled:"mozFullScreen",element:"mozFullScreenElement",request:"mozRequestFullScreen",exit:"mozCancelFullScreen",events:{change:"mozfullscreenchange",error:"mozfullscreenerror"}},ms:{enabled:"msFullscreenEnabled",element:"msFullscreenElement",request:"msRequestFullscreen",exit:"msExitFullscreen",events:{change:"MSFullscreenChange",error:"MSFullscreenError"}}},h=f.w3;for(d in f)if(f[d].enabled in
c){var g=f[d];break}h.enabled in c||!g||(c.addEventListener(g.events.change,a,!1),c.addEventListener(g.events.error,b,!1),c[h.enabled]=c[g.enabled],c[h.element]=c[g.element],c[h.exit]=c[g.exit],Element.prototype[h.request]=function(){return this[g.request].apply(this,arguments)});return g})(document);GA=GA||{};
GA.plugins=function(c){c.move=function(a){if(!1===a instanceof Array)a.x+=a.vx|0,a.y+=a.vy|0;else for(var b=0;b<a.length;b++){var d=a[b];d.x+=d.vx|0;d.y+=d.vy|0}};c.distance=function(a,b){var d=b.centerX-a.centerX;a=b.centerY-a.centerY;return Math.sqrt(d*d+a*a)};c.followEase=function(a,b,d){var c=b.centerX-a.centerX;b=b.centerY-a.centerY;1<=Math.sqrt(c*c+b*b)&&(a.x+=c*d,a.y+=b*d)};c.followConstant=function(a,b,d){var c=b.centerX-a.centerX;b=b.centerY-a.centerY;var h=Math.sqrt(c*c+b*b);h>=d&&(a.x+=
c/h*d,a.y+=b/h*d)};c.rotateAroundSprite=function(a,b,d,c){a.x=b.centerX-a.parent.x+d*Math.cos(c)-a.halfWidth;a.y=b.centerY-a.parent.y+d*Math.sin(c)-a.halfWidth};c.rotateAroundPoint=function(a,b,d,c,h){var f={};f.x=a+Math.cos(h)*d;f.y=b+Math.sin(h)*c;return f};c.angle=function(a,b){return Math.atan2(b.centerY-a.centerY,b.centerX-a.centerX)};c.randomInt=function(a,b){return Math.floor(Math.random()*(b-a+1))+a};c.randomFloat=function(a,b){return a+Math.random()*(b-a)};c.wait=function(a,b){return setTimeout(b,
a)};c.worldCamera=function(a,b){return{width:b.width,height:b.height,_x:0,_y:0,get x(){return this._x},set x(b){this._x=b;a.x=-this._x;a._previousX=a.x},get y(){return this._y},set y(b){this._y=b;a.y=-this._y;a._previousY=a.y},get centerX(){return this.x+this.width/2},get centerY(){return this.y+this.height/2},get rightInnerBoundary(){return this.x+this.width/2+this.width/4},get leftInnerBoundary(){return this.x+this.width/2-this.width/4},get topInnerBoundary(){return this.y+this.height/2-this.height/
4},get bottomInnerBoundary(){return this.y+this.height/2+this.height/4},follow:function(b){b.x<this.leftInnerBoundary&&(this.x=b.x-this.width/4);b.y<this.topInnerBoundary&&(this.y=b.y-this.height/4);b.x+b.width>this.rightInnerBoundary&&(this.x=b.x+b.width-this.width/4*3);b.y+b.height>this.bottomInnerBoundary&&(this.y=b.y+b.height-this.height/4*3);0>this.x&&(this.x=0);0>this.y&&(this.y=0);this.x+this.width>a.width&&(this.x=a.width-this.width);this.y+this.height>a.height&&(this.y=a.height-this.height)},
centerOver:function(a){this.x=a.x+a.halfWidth-this.width/2;this.y=a.y+a.halfHeight-this.height/2}}};c.scaleToWindow=function(a){var b=Math.min(window.innerWidth/c.canvas.width,window.innerHeight/c.canvas.height);c.canvas.style.transformOrigin="0 0";c.canvas.style.transform="scale("+b+")";var d=c.canvas.width>c.canvas.height?c.canvas.width*b<window.innerWidth?"horizontally":"vertically":c.canvas.height*b<window.innerHeight?"vertically":"horizontally";if("horizontally"===d){var f=(window.innerWidth-
c.canvas.width*b)/2;c.canvas.style.marginLeft=f+"px";c.canvas.style.marginRight=f+"px"}"vertically"===d&&(f=(window.innerHeight-c.canvas.height*b)/2,c.canvas.style.marginTop=f+"px",c.canvas.style.marginBottom=f+"px");c.canvas.style.paddingLeft=0;c.canvas.style.paddingRight=0;c.canvas.style.paddingTop=0;c.canvas.style.paddingBottom=0;c.canvas.style.display="block";document.body.style.backgroundColor=a||"#2C3539";c.pointer.scale=b;c.scale=b;c.canvas.scaled=!0;a=navigator.userAgent.toLowerCase();-1==
a.indexOf("safari")||-1<a.indexOf("chrome")||(c.canvas.style.maxHeight="100%",c.canvas.style.minHeight="100%")};c.scaleToFit=function(a,b){if("width"===a){var d=c.canvas.width/window.innerWidth;var f=c.canvas.height/window.innerHeight}"height"===a&&(d=window.innerWidth/c.canvas.width,f=window.innerHeight/c.canvas.height);a=Math.min(d,f);c.canvas.style.transformOrigin="0 0";c.canvas.style.transform="scale("+a+")";document.body.style.backgroundColor=b;c.canvas.style.paddingLeft=0;c.canvas.style.paddingRight=
0;c.canvas.style.marginLeft="auto";c.canvas.style.marginRight="auto";c.canvas.style.display="block";c.canvas.style.minHeight="100%";b=navigator.userAgent.toLowerCase();-1==b.indexOf("safari")||-1<b.indexOf("chrome")||(c.canvas.style.maxHeight="100%",c.canvas.style.minHeight="100%");c.scale=a};c.shakingSprites=[];c.updateShakingSprites=function(){if(0<c.shakingSprites.length)for(var a=c.shakingSprites.length-1;0<=a;a--){var b=c.shakingSprites[a];b.updateShake&&b.updateShake()}};c.updateFunctions.push(c.updateShakingSprites);
c.shake=function(a,b,d){void 0===b&&(b=16);void 0===d&&(d=!1);var f=1,h=a.x,g=a.y,e=a.rotation,l=b/10,k=function(a,b){return Math.floor(Math.random()*(b-a+1))+a};-1===c.shakingSprites.indexOf(a)&&(c.shakingSprites.push(a),a.updateShake=function(){d?(10>f&&(a.rotation=e,b-=l,a.rotation=b*m,f+=1,m*=-1),10<=f&&(a.rotation=e,c.shakingSprites.splice(c.shakingSprites.indexOf(a),1))):(10>f&&(a.x=h,a.y=g,b-=l,a.x+=k(-b,b),a.y+=k(-b,b),f+=1),10<=f&&(a.x=h,a.y=g,c.shakingSprites.splice(c.shakingSprites.indexOf(a),
1)))});var m=1};c.tweens=[];c.updateTweens=function(){if(0<c.tweens.length)for(var a=c.tweens.length-1;0<=a;a--){var b=c.tweens[a];b&&b.update()}};c.updateFunctions.push(c.updateTweens);c.cubicBezier=function(a,b,d,c,h){var f=a*a;return b+(3*-b+a*(3*b-b*a))*a+(3*d+a*(-6*d+3*d*a))*a+(3*c-3*c*a)*f+h*f*a};var w={linear:function(a){return a},smoothstep:function(a){return a*a*(3-2*a)},smoothstepSquared:function(a){return Math.pow(a*a*(3-2*a),2)},smoothstepCubed:function(a){return Math.pow(a*a*(3-2*a),
3)},acceleration:function(a){return a*a},accelerationCubed:function(a){return Math.pow(a*a,3)},deceleration:function(a){return 1-Math.pow(1-a,2)},decelerationCubed:function(a){return 1-Math.pow(1-a,3)},sine:function(a){return Math.sin(a*Math.PI/2)},sineSquared:function(a){return Math.pow(Math.sin(a*Math.PI/2),2)},sineCubed:function(a){return Math.pow(Math.sin(a*Math.PI/2),2)},inverseSine:function(a){return 1-Math.sin((1-a)*Math.PI/2)},inverseSineSquared:function(a){return 1-Math.pow(Math.sin((1-a)*
Math.PI/2),2)},inverseSineCubed:function(a){return 1-Math.pow(Math.sin((1-a)*Math.PI/2),3)},spline:function(a,b,d,c,h){return.5*(2*d+(-b+c)*a+(2*b-5*d+4*c-h)*a*a+(-b+3*d-3*c+h)*a*a*a)}};c.tweenProperty=function(a,b,d,f,h,g,e,l){void 0===h&&(h=60);void 0===g&&(g="smoothstep");void 0===e&&(e=!1);void 0===l&&(l=0);var k={},m=g.split(" ");"bounce"===m[0]&&(k.startMagnitude=parseInt(m[1]),k.endMagnitude=parseInt(m[2]));k.start=function(a,b){k.startValue=JSON.parse(JSON.stringify(a));k.endValue=JSON.parse(JSON.stringify(b));
k.playing=!0;k.totalFrames=h;k.frameCounter=0;c.tweens.push(k)};k.start(d,f);k.update=function(){if(k.playing)if(k.frameCounter<k.totalFrames){var d=k.frameCounter/k.totalFrames;d="bounce"!==m[0]?w[g](d):w.spline(d,k.startMagnitude,0,1,k.endMagnitude);a[b]=k.endValue*d+k.startValue*(1-d);k.frameCounter+=1}else k.end()};k.end=function(){k.playing=!1;if(k.onComplete)k.onComplete();c.tweens.splice(c.tweens.indexOf(k),1);e&&c.wait(l,function(){k.start(k.endValue,k.startValue)})};k.play=function(){k.playing=
!0};k.pause=function(){k.playing=!1};return k};c.fadeOut=function(a,b){void 0===b&&(b=60);return c.tweenProperty(a,"alpha",a.alpha,0,b,"sine")};c.fadeIn=function(a,b){void 0===b&&(b=60);return c.tweenProperty(a,"alpha",a.alpha,1,b,"sine")};c.pulse=function(a,b,d){void 0===b&&(b=60);void 0===d&&(d=0);return c.tweenProperty(a,"alpha",a.alpha,d,b,"smoothstep",!0)};c.makeTween=function(a){var b={tweens:[]};a.forEach(function(a){a=c.tweenProperty(a[0],a[1],a[2],a[3],a[4],a[5],a[6],a[7]);b.tweens.push(a)});
var d=0;b.completed=function(){d+=1;if(d===b.tweens.length){if(b.onComplete)b.onComplete();d=0}};b.tweens.forEach(function(a){a.onComplete=function(){b.completed()}});b.pause=function(){b.tweens.forEach(function(a){a.playing=!1})};b.play=function(){b.tweens.forEach(function(a){a.playing=!0})};return b};c.slide=function(a,b,d,f,h,g,e){void 0===f&&(f=60);void 0===h&&(h="smoothstep");void 0===g&&(g=!1);void 0===e&&(e=0);return c.makeTween([[a,"x",a.x,b,f,h,g,e],[a,"y",a.y,d,f,h,g,e]])};c.breathe=function(a,
b,d,f,h,g){void 0===f&&(f=60);void 0===h&&(h=!0);void 0===g&&(g=0);return c.makeTween([[a,"scaleX",a.scaleX,b,f,"smoothstepSquared",h,g],[a,"scaleY",a.scaleY,d,f,"smoothstepSquared",h,g]])};c.scale=function(a,b,d,f){void 0===f&&(f=60);return c.makeTween([[a,"scaleX",a.scaleX,b,f,"smoothstep",!1],[a,"scaleY",a.scaleY,d,f,"smoothstep",!1]])};c.strobe=function(a,b,d,f,h,g,e){void 0===b&&(b=1.3);void 0===d&&(d=10);void 0===f&&(f=20);void 0===h&&(h=10);void 0===g&&(g=!0);void 0===e&&(e=0);d="bounce "+
d+" "+f;return c.makeTween([[a,"scaleX",a.scaleX,b,h,d,g,e],[a,"scaleY",a.scaleY,b,h,d,g,e]])};c.wobble=function(a,b,d,f,h,g,e,l,k,m,r){void 0===b&&(b=1.2);void 0===d&&(d=1.2);void 0===f&&(f=10);void 0===h&&(h=10);void 0===g&&(g=10);void 0===e&&(e=-10);void 0===l&&(l=-10);void 0===k&&(k=.98);void 0===m&&(m=!0);void 0===r&&(r=0);a=c.makeTween([[a,"scaleX",a.scaleX,b,f,"bounce "+h+" "+g,m,r],[a,"scaleY",a.scaleY,d,f,"bounce "+e+" "+l,m,r]]);a.tweens.forEach(function(a){a.onComplete=function(){1<a.endValue&&
(a.endValue*=k,1>=a.endValue&&(a.endValue=1,c.removeTween(a)))}});return a};c.removeTween=function(a){a.tweens?(a.pause(),a.tweens.forEach(function(a){c.tweens.splice(c.tweens.indexOf(a),1)})):(a.pause(),c.tweens.splice(c.tweens.indexOf(a),1))};c.followCurve=function(a,b,d,f,h,g){void 0===f&&(f="smoothstep");void 0===h&&(h=!1);void 0===g&&(g=0);var e={},l=f.split(" ");"bounce"===l[0]&&(e.startMagnitude=parseInt(l[1]),e.endMagnitude=parseInt(l[2]));e.start=function(a){e.playing=!0;e.totalFrames=d;
e.frameCounter=0;e.pointsArray=JSON.parse(JSON.stringify(a));c.tweens.push(e)};e.start(b);e.update=function(){var b=e.pointsArray;if(e.playing)if(e.frameCounter<e.totalFrames){var d=e.frameCounter/e.totalFrames;d="bounce"!==l[0]?w[f](d):w.spline(d,e.startMagnitude,0,1,e.endMagnitude);a.x=c.cubicBezier(d,b[0][0],b[1][0],b[2][0],b[3][0]);a.y=c.cubicBezier(d,b[0][1],b[1][1],b[2][1],b[3][1]);e.frameCounter+=1}else e.end()};e.end=function(){e.playing=!1;if(e.onComplete)e.onComplete();c.tweens.splice(c.tweens.indexOf(e),
1);h&&c.wait(g,function(){e.pointsArray=e.pointsArray.reverse();e.start(e.pointsArray)})};e.pause=function(){e.playing=!1};e.play=function(){e.playing=!0};return e};c.walkPath=function(a,b,d,f,h,g,e){function l(b){var d=c.makeTween([[a,"x",k[b][0],k[b+1][0],m,f],[a,"y",k[b][1],k[b+1][1],m,f]]);d.onComplete=function(){b+=1;b<k.length-1?c.wait(e,function(){d=l(b)}):h&&(g&&k.reverse(),c.wait(e,function(){b=0;a.x=k[0][0];a.y=k[0][1];d=l(b)}))};return d}void 0===d&&(d=300);void 0===f&&(f="smoothstep");
void 0===h&&(h=!1);void 0===g&&(g=!1);void 0===e&&(e=0);var k=JSON.parse(JSON.stringify(b)),m=d/k.length;return l(0)};c.walkCurve=function(a,b,d,f,h,g,e){function l(d){var m=c.followCurve(a,b[d],k,f);m.onComplete=function(){d+=1;d<b.length?c.wait(e,function(){m=l(d)}):h&&(g&&(b.reverse(),b.forEach(function(a){a.reverse()})),c.wait(e,function(){d=0;a.x=b[0][0];a.y=b[0][1];m=l(d)}))};return m}void 0===d&&(d=300);void 0===f&&(f="smoothstep");void 0===h&&(h=!1);void 0===g&&(g=!1);void 0===e&&(e=0);var k=
d/b.length;return l(0)};c.shoot=function(a,b,d,c,h,g){g=g();g.x=a.centerX-g.halfWidth+d*Math.cos(b);g.y=a.centerY-g.halfHeight+d*Math.sin(b);g.vx=Math.cos(b)*c;g.vy=Math.sin(b)*c;h.push(g);return g};c.grid=function(a,b,d,f,h,g,e,l,k){void 0===a&&(a=0);void 0===b&&(b=0);void 0===d&&(d=32);void 0===f&&(f=32);void 0===g&&(g=0);void 0===e&&(e=0);void 0===h&&(h=!1);var m=c.group();m.createGrid=function(){for(var c=a*b,n=0;n<c;n++){var t=n%a*d,v=Math.floor(n/a)*f,q=l();m.addChild(q);h?(q.x=t+d/2-q.halfWidth+
g,q.y=v+f/2-q.halfHeight+e):(q.x=t+g,q.y=v+e);k&&k(q)}};m.createGrid();c.stage.addChild(m);return m};c.progressBar={maxWidth:0,height:0,backgroundColor:"gray",foregroundColor:"cyan",backBar:null,frontBar:null,percentage:null,assets:null,initialized:!1,create:function(a,b){this.initialized||(this.assets=b,this.maxWidth=c.canvas.width/2,this.backBar=c.rectangle(this.maxWidth,32,this.backgroundColor),this.backBar.x=c.canvas.width/2-this.maxWidth/2,this.backBar.y=c.canvas.height/2-16,this.frontBar=c.rectangle(this.maxWidth,
32,this.foregroundColor),this.frontBar.x=c.canvas.width/2-this.maxWidth/2,this.frontBar.y=c.canvas.height/2-16,this.percentage=c.text("0%","28px sans-serif","black"),this.percentage.x=c.canvas.width/2-this.maxWidth/2+12,this.percentage.y=c.canvas.height/2-12,this.initialized=!0)},update:function(){var a=(c.assets.loaded+1)/c.assets.toLoad;this.frontBar.width=this.maxWidth*a;this.percentage.content=Math.floor(100*a)+"%"},remove:function(){c.remove(this.frontBar);c.remove(this.backBar);c.remove(this.percentage)}};
c.particles=[];c.particleEffect=function(a,b,d,f,h,g,e,l,k,m,r,n,t,v,q,u,B,A){function w(f){var e=d();0<e.frames.length&&e.gotoAndStop(Math.floor(Math.random()*(e.frames.length-1-0+1))+0);e.x=a-e.halfWidth;e.y=b-e.halfHeight;var g=Math.floor(Math.random()*(m-k+1))+k;e.width=g;e.height=g;e.scaleSpeed=t+Math.random()*(v-t);e.alphaSpeed=q+Math.random()*(u-q);e.rotationSpeed=B+Math.random()*(A-B);g=r+Math.random()*(n-r);e.vx=g*Math.cos(f);e.vy=g*Math.sin(f);e.updateParticle=function(){e.vy+=h;e.x+=e.vx;
e.y+=e.vy;0<e.scaleX-e.scaleSpeed&&(e.scaleX-=e.scaleSpeed);0<e.scaleY-e.scaleSpeed&&(e.scaleY-=e.scaleSpeed);e.rotation+=e.rotationSpeed;e.alpha-=e.alphaSpeed;0>=e.alpha&&(c.remove(e),c.particles.splice(c.particles.indexOf(e),1))};c.particles.push(e)}void 0===a&&(a=0);void 0===b&&(b=0);void 0===d&&(d=function(){return c.circle(10,"red")});void 0===f&&(f=10);void 0===h&&(h=0);void 0===g&&(g=!0);void 0===e&&(e=0);void 0===l&&(l=6.28);void 0===k&&(k=4);void 0===m&&(m=16);void 0===r&&(r=.1);void 0===
n&&(n=1);void 0===t&&(t=.01);void 0===v&&(v=.05);void 0===q&&(q=.02);void 0===u&&(u=.02);void 0===B&&(B=.01);void 0===A&&(A=.03);for(var p=[],x,y=(l-e)/(f-1),z=0;z<f;z++)g?(x=e+Math.random()*(l-e),p.push(x)):(void 0===x&&(x=e),p.push(x),x+=y);p.forEach(function(a){w(a)})};c.updateParticles=function(){if(0<c.particles.length)for(var a=c.particles.length-1;0<=a;a--)c.particles[a].updateParticle()};c.updateFunctions.push(c.updateParticles);c.emitter=function(a,b){function d(){b()}var c={},h=void 0;c.playing=
!1;c.play=function(){c.playing||(b(),h=setInterval(d.bind(this),a),c.playing=!0)};c.stop=function(){c.playing&&(clearInterval(h),c.playing=!1)};return c};c.tilingSprite=function(a,b,d,f,h){void 0===f&&(f=0);void 0===h&&(h=0);if(c.assets[d].frame){var g=c.assets[d].frame.w;var e=c.assets[d].frame.h}else g=c.assets[d].width,e=c.assets[d].height;var l=a>=g?Math.round(a/g)+1:2;var k=b>=e?Math.round(b/e)+1:2;var m=c.grid(l,k,g,e,!1,0,0,function(){return c.sprite(d)});m._tileX=0;m._tileY=0;a=c.rectangle(a,
b,"none","none");a.x=f;a.y=h;a.mask=!0;a.addChild(m);Object.defineProperties(a,{tileX:{get:function(){return m._tileX},set:function(a){m.children.forEach(function(b){var d=a-m._tileX;b.x+=d;b.x>(l-1)*g&&(b.x=0-g+d);b.x<0-g-d&&(b.x=(l-1)*g)});m._tileX=a},enumerable:!0,configurable:!0},tileY:{get:function(){return m._tileY},set:function(a){m.children.forEach(function(b){var d=a-m._tileY;b.y+=d;b.y>(k-1)*e&&(b.y=0-e+d);b.y<0-e-d&&(b.y=(k-1)*e)});m._tileY=a},enumerable:!0,configurable:!0}});return a};
c.burst=function(a,b,d,f,h,g,e,l,k,m,r,n,t,v){function q(){var f=d();f.x=a-f.halfWidth;f.y=b-f.halfHeight;var q=c.randomFloat(h,g);f.width=q;f.height=q;f.scaleSpeed=c.randomFloat(k,m);f.alphaSpeed=c.randomFloat(r,n);f.rotationSpeed=c.randomFloat(t,v);q=c.randomFloat(e,l);f.vx=q*Math.cos(u*Math.PI/180);f.vy=q*Math.sin(u*Math.PI/180);f.update=function(){f.x+=f.vx;f.y+=f.vy;0<f.scaleX-f.scaleSpeed&&(f.scaleX-=f.scaleSpeed);0<f.scaleY-f.scaleSpeed&&(f.scaleY-=f.scaleSpeed);f.rotation+=f.rotationSpeed;
f.alpha-=f.alphaSpeed;0>=f.alpha&&(c.remove(f),c.particles.splice(c.particles.indexOf(f),1))};c.particles.push(f)}a=a||0;b=b||0;d=d||function(){return c.circle(10,"red")};h=h||4;g=g||16;f=f||10;e=e||.1;l=l||1;k=k||.01;m=m||.05;r=r||.02;n=n||.02;t=t||.01;v=v||.03;var u;for(u=0;360>u;u+=Math.round(360/f))q()};c.outsideBounds=function(a,b,d){var c=b.y,h=b.width,g=b.height,e;a.x<b.x-a.width&&(e="left");a.y<c-a.height&&(e="top");a.x>h&&(e="right");a.y>g&&(e="bottom");e&&d&&d(e);return e};c.contain=function(a,
b,d,c){var f=b.x,g=b.y,e=b.width;b=b.height;d=d||!1;if(a.x<f){d&&(a.vx*=-1);a.mass&&(a.vx/=a.mass);a.x=f;var l="left"}a.y<g&&(d&&(a.vy*=-1),a.mass&&(a.vy/=a.mass),a.y=g,l="top");a.x+a.width>e&&(d&&(a.vx*=-1),a.mass&&(a.vx/=a.mass),a.x=e-a.width,l="right");a.y+a.height>b&&(d&&(a.vy*=-1),a.mass&&(a.vy/=a.mass),a.y=b-a.height,l="bottom");l&&c&&c(l);return l};c.hitTestPoint=function(a,b){var d=b.radius?"circle":"rectangle";if("rectangle"===d){var c=b.x;var h=b.x+b.width;var g=b.y;var e=b.y+b.height;c=
a.x>c&&a.x<h&&a.y>g&&a.y<e}"circle"===d&&(d=a.x-b.centerX,a=a.y-b.centerY,a=Math.sqrt(d*d+a*a),c=a<b.radius);return c};c.hitTestCircle=function(a,b,d){void 0===d&&(d=!1);if(d){d=b.gx+b.radius-(a.gx+a.radius);var c=b.gy+b.radius-(a.gy+a.radius)}else d=b.centerX-a.centerX,c=b.centerY-a.centerY;return Math.sqrt(d*d+c*c)<a.radius+b.radius};c.hitTestRectangle=function(a,b,d){void 0===d&&(d=!1);if(d){var c=a.gx+a.halfWidth-(b.gx+b.halfWidth);var h=a.gy+a.halfHeight-(b.gy+b.halfHeight)}else c=a.centerX-
b.centerX,h=a.centerY-b.centerY;d=a.halfWidth+b.halfWidth;a=a.halfHeight+b.halfHeight;return Math.abs(c)<d?Math.abs(h)<a?!0:!1:!1};c.hitTestCircleRectangle=function(a,b,d){void 0===d&&(d=!1);if(d){var f=a.gx;var h=a.gy;var g=b.gx;var e=b.gy}else f=a.x,h=a.y,g=b.x,e=b.y;f=h<e-b.halfHeight?f<g-1-b.halfWidth?"topLeft":f>g+1+b.halfWidth?"topRight":"topMiddle":h>e+b.halfHeight?f<g-1-b.halfWidth?"bottomLeft":f>g+1+b.halfWidth?"bottomRight":"bottomMiddle":f<g-b.halfWidth?"leftMiddle":"rightMiddle";if("topMiddle"===
f||"bottomMiddle"===f||"leftMiddle"===f||"rightMiddle"===f)a=c.hitTestRectangle(a,b,d);else{h={};switch(f){case "topLeft":h.x=g;h.y=e;break;case "topRight":h.x=g+b.width;h.y=e;break;case "bottomLeft":h.x=g;h.y=e+b.height;break;case "bottomRight":h.x=g+b.width,h.y=e+b.height}a=c.hitTestCirclePoint(a,h,d)}return a?f:a};c.hitTestCirclePoint=function(a,b,d){void 0===d&&(d=!1);b.diameter=1;b.radius=.5;b.centerX=b.x;b.centerY=b.y;b.gx=b.x;b.gy=b.y;return c.hitTestCircle(a,b,d)};c.rectangleCollision=function(a,
b,d,c){void 0===d&&(d=!1);void 0===c&&(c=!1);if(c){c=a.gx+a.halfWidth-(b.gx+b.halfWidth);var f=a.gy+a.halfHeight-(b.gy+b.halfHeight)}else c=a.centerX-b.centerX,f=a.centerY-b.centerY;var g=a.halfWidth+b.halfWidth;b=a.halfHeight+b.halfHeight;if(Math.abs(c)<g&&Math.abs(f)<b)if(g-=Math.abs(c),b-=Math.abs(f),g>=b){if(0<f){var e="top";a.y+=b}else e="bottom",a.y-=b;d&&(a.vy*=-1)}else 0<c?(e="left",a.x+=g):(e="right",a.x-=g),d&&(a.vx*=-1);return e};c.circleCollision=function(a,b,d,c){var f=!1;void 0===d&&
(d=!0);void 0===c&&(c=!1);if(c){c=b.gx+b.radius-(a.gx+a.radius);var g=b.gy+b.radius-(a.gy+a.radius)}else c=b.centerX-a.centerX,g=b.centerY-a.centerY;var e=Math.sqrt(c*c+g*g);b=a.radius+b.radius;if(e<b&&(f=!0,b=b-e+.3,a.x-=c/e*b,a.y-=g/e*b,d)){e=g;var l=-c;d=a.mass||1;g=-e;b=Math.sqrt(e*e+l*l);var k=e/b;c=l/b;e=a.vx*k+a.vy*c;var m=l/b*a.vx+g/b*a.vy;l=l/b*m*-1;g=g/b*m*-1;b=e*k+l;c=e*c+g;a.vx=b/d;a.vy=c/d}return f};c.movingCircleCollision=function(a,b,d){var c,h,g=!1;a.mass=a.mass||1;b.mass=b.mass||
1;void 0===d&&(d=!1);if(d){var e=b.gx+b.radius-(a.gx+a.radius);var l=b.gy+b.radius-(a.gy+a.radius)}else e=b.centerX-a.centerX,l=b.centerY-a.centerY;d=Math.sqrt(e*e+l*l);var k=a.radius+b.radius;if(d<k){g=!0;var m=k-d+.3;k=e/d;var r=l/d;var n=Math.abs(k*m/2);m=Math.abs(r*m/2);a.x>b.x?c=1:c=-1;a.y>b.y?h=1:h=-1;a.x+=n*c;a.y+=m*h;b.x+=n*-c;b.y+=m*-h;c=l;h=-e;e=a.vx*k+a.vy*r;l=c/d*a.vx+h/d*a.vy;n=b.vx*k+b.vy*r;m=c/d*b.vx+h/d*b.vy;a.bounce={};a.bounce.x=c/d*l+n*k;a.bounce.y=h/d*l+n*r;b.bounce={};b.bounce.x=
e*k+c/d*m;b.bounce.y=e*r+h/d*m;a.vx=a.bounce.x/a.mass;a.vy=a.bounce.y/a.mass;b.vx=b.bounce.x/b.mass;b.vy=b.bounce.y/b.mass}return g};c.multipleCircleCollision=function(a,b){void 0===b&&(b=!1);for(var d=0;d<a.length;d++)for(var f=a[d],h=d+1;h<a.length;h++)c.movingCircleCollision(f,a[h],b)};c.circlePointCollision=function(a,b,d,f){void 0===f&&(f=!1);void 0===d&&(d=!1);b.diameter=1;b.radius=.5;b.centerX=b.x;b.centerY=b.y;b.gx=b.x;b.gy=b.y;return c.circleCollision(a,b,d,f)};c.circleRectangleCollision=
function(a,b,d,f){void 0===f&&(f=!1);void 0===d&&(d=!1);if(f){var h=a.gx;var g=a.gy;var e=b.gx;var l=b.gy}else h=a.x,g=a.y,e=b.x,l=b.y;h=g<l-b.halfHeight?h<e-1-b.halfWidth?"topLeft":h>e+1+b.halfWidth?"topRight":"topMiddle":g>l+b.halfHeight?h<e-1-b.halfWidth?"bottomLeft":h>e+1+b.halfWidth?"bottomRight":"bottomMiddle":h<e-b.halfWidth?"leftMiddle":"rightMiddle";if("topMiddle"===h||"bottomMiddle"===h||"leftMiddle"===h||"rightMiddle"===h)a=c.rectangleCollision(a,b,d,f);else{g={};switch(h){case "topLeft":g.x=
e;g.y=l;break;case "topRight":g.x=e+b.width;g.y=l;break;case "bottomLeft":g.x=e;g.y=l+b.height;break;case "bottomRight":g.x=e+b.width,g.y=l+b.height}a=c.circlePointCollision(a,g,d,f)}return a?h:a};c.hit=function(a,b,d,f,h,g){function e(a,b){var e=void 0!==b.parent;if(void 0!==a.parent&&e){if(a.diameter&&b.diameter)return a=d?0!==a.vx+a.vy&&0!==b.vx+b.vy?c.movingCircleCollision(a,b,h):c.circleCollision(a,b,f,h):c.hitTestCircle(a,b,h),a;if(a.diameter&&!b.diameter)return a=d?c.circleRectangleCollision(a,
b,f,h):c.hitTestCircleRectangle(a,b,h),a;a=d?f?c.rectangleCollision(a,b,!0,h):c.rectangleCollision(a,b,!1,h):c.hitTestRectangle(a,b,h);return a}if(e&&void 0!==a.x&&void 0!==a.y)return c.hitTestPoint(a,b);throw Error("I'm sorry, "+a+" and "+b+" cannot be use together in a collision test.");}function l(){if(a instanceof Array){var d=a;b=a;a=d}for(d=b.length-1;0<=d;d--){var c=b[d];(k=e(a,c))&&g&&g(k,c)}}var k;d=d||!1;f=f||!1;h=h||!1;b instanceof Array||a instanceof Array?l():(k=e(a,b))&&g&&g(k);return k};
c.getIndex=function(a,b,d,c,h){return Math.floor(a/d)+Math.floor(b/c)*h};c.getTile=function(a,b,d){var c={};c.gid=b[a];c.width=d.tilewidth;c.height=d.tileheight;c.halfWidth=d.tilewidth/2;c.halfHeight=d.tileheight/2;c.x=a%d.widthInTiles*d.tilewidth+d.x;c.y=Math.floor(a/d.widthInTiles)*d.tileheight+d.y;c.gx=c.x;c.gy=c.y;c.centerX=c.x+d.tilewidth/2;c.centery=c.y+d.tileheight/2;return c};c.surroundingCells=function(a,b){return[a-b-1,a-b,a-b+1,a-1,a,a+1,a+b-1,a+b,a+b+1]};c.getPoints=function(a){var b=
a.collisionArea;return void 0!==b?{topLeft:{x:a.x+b.x,y:a.y+b.y},topRight:{x:a.x+b.x+b.width,y:a.y+b.y},bottomLeft:{x:a.x+b.x,y:a.y+b.y+b.height},bottomRight:{x:a.x+b.x+b.width,y:a.y+b.y+b.height}}:{topLeft:{x:a.x,y:a.y},topRight:{x:a.x+a.width-1,y:a.y},bottomLeft:{x:a.x,y:a.y+a.height-1},bottomRight:{x:a.x+a.width-1,y:a.y+a.height-1}}};c.hitTestTile=function(a,b,d,f,h){function g(h){h=a.collisionPoints[h];e.index=c.getIndex(h.x,h.y,f.tilewidth,f.tileheight,f.widthInTiles);e.gid=b[e.index];return e.gid===
d?!0:!1}var e={};switch(h||"some"){case "center":a.collisionPoints={center:{x:a.centerX,y:a.centerY}};e.hit=Object.keys(a.collisionPoints).some(g);break;case "every":a.collisionPoints=c.getPoints(a);e.hit=Object.keys(a.collisionPoints).every(g);break;case "some":a.collisionPoints=c.getPoints(a),e.hit=Object.keys(a.collisionPoints).some(g)}return e};c.updateMap=function(a,b,d){var f=a.map(function(a){return 0});b instanceof Array?b.forEach(function(a){a.index=c.getIndex(a.centerX,a.centerY,d.tilewidth,
d.tileheight,d.widthInTiles);f[a.index]=a.gid}):(b.index=c.getIndex(b.centerX,b.centerY,d.tilewidth,d.tileheight,d.widthInTiles),f[b.index]=b.gid);return f};c.fourKeyController=function(a,b,d,f,h,g){a.direction="";leftArrow=c.keyboard(g);upArrow=c.keyboard(d);rightArrow=c.keyboard(f);downArrow=c.keyboard(h);leftArrow.press=function(){a.vx=-b;a.vy=0;a.direction="left"};leftArrow.release=function(){rightArrow.isDown||0!==a.vy||(a.vx=0)};upArrow.press=function(){a.vy=-b;a.vx=0;a.direction="up"};upArrow.release=
function(){downArrow.isDown||0!==a.vx||(a.vy=0)};rightArrow.press=function(){a.vx=b;a.vy=0;a.direction="right"};rightArrow.release=function(){leftArrow.isDown||0!==a.vy||(a.vx=0)};downArrow.press=function(){a.vy=b;a.vx=0;a.direction="down"};downArrow.release=function(){upArrow.isDown||0!==a.vx||(a.vy=0)}};c.makeTiledWorld=function(a,b){a=c.json(a);var d=c.group();d.tileheight=a.tileheight;d.tilewidth=a.tilewidth;d.width=a.width*a.tilewidth;d.height=a.height*a.tileheight;d.widthInTiles=a.width;d.heightInTiles=
a.height;d.objects=[];var f=a.tilesets[0].spacing,h=Math.floor(a.tilesets[0].imagewidth/(a.tilewidth+f));a.layers.forEach(function(g){var e=c.group();Object.keys(g).forEach(function(a){"width"!==a&&"height"!==a&&(e[a]=g[a])});e.alpha=g.opacity;d.addChild(e);d.objects.push(e);"tilelayer"===g.type&&g.data.forEach(function(g,k){if(0!==g){var l=k%d.widthInTiles;var r=Math.floor(k/d.widthInTiles);l*=d.tilewidth;r*=d.tileheight;var n=(g-1)%h;var t=Math.floor((g-1)/h);n*=d.tilewidth;t*=d.tileheight;0<f&&
(n+=f+(g-1)%h*f,t+=f+f*Math.floor((g-1)/h));n=c.frame(b,n,t,d.tilewidth,d.tileheight);var v=a.tilesets[0].tileproperties,q=String(g-1);if(v[q]&&v[q].name){var u=c.sprite(n);Object.keys(v[q]).forEach(function(a){u[a]=v[q][a]});d.objects.push(u)}else u=c.sprite(n);u.x=l;u.y=r;u.index=k;u.gid=g;e.addChild(u)}});"objectgroup"===g.type&&g.objects.forEach(function(a){a.group=e;e.width=d.width;e.height=d.height;d.objects.push(a)})});d.getObject=function(a){this.searchForObject=function(){var b;d.objects.some(function(d){if(d.name&&
d.name===a)return b=d,!0});if(b)return b;console.log("There is no object with the property name: "+a)};return this.searchForObject()};d.getObjects=function(a){var b=Array.prototype.slice.call(arguments),c=[];d.objects.forEach(function(a){a.name&&-1!==b.indexOf(a.name)&&c.push(a)});0<c.length||console.log("I could not find those objects");return c};return d};c.fullscreenScale=1;c.requestFullScreen=function(){document.fullscreenEnabled||c.canvas.requestFullscreen()};c.exitFullScreen=function(){document.fullscreenEnabled&&
document.exitFullscreen()};c.alignFullscreen=function(){c.fullscreenScale=Math.min(screen.width/c.canvas.width,screen.height/c.canvas.height);if(0===document.styleSheets.length){var a=document.createElement("div");a.innerHTML="<style></style>";document.body.appendChild(a)}a=navigator.userAgent.toLowerCase();c.canvas.width>c.canvas.height?-1!==a.indexOf("safari")||-1!==a.indexOf("chrome")?document.styleSheets[0].insertRule("canvas:-webkit-full-screen {position: fixed; width: 100%; height: auto; top: 0; right: 0; bottom: 0; left: 0; margin: auto; object-fit: contain}",
0):-1!==a.indexOf("firefox")?document.styleSheets[0].insertRule("canvas:-moz-full-screen {position: fixed; width: 100%; height: auto; top: 0; right: 0; bottom: 0; left: 0; margin: auto; object-fit: contain;}",0):-1!==a.indexOf("opera")?document.styleSheets[0].insertRule("canvas:-o-full-screen {position: fixed; width: 100%; height: auto; top: 0; right: 0; bottom: 0; left: 0; margin: auto; object-fit: contain;}",0):-1!==a.indexOf("explorer")?document.styleSheets[0].insertRule("canvas:-ms-full-screen {position: fixed; width: 100%; height: auto; top: 0; right: 0; bottom: 0; left: 0; margin: auto; object-fit: contain;}",
0):document.styleSheets[0].insertRule("canvas:fullscreen {position: fixed; width: 100%; height: auto; top: 0; right: 0; bottom: 0; left: 0; margin: auto; object-fit: contain;}",0):-1!==a.indexOf("safari")||-1!==a.indexOf("chrome")?document.styleSheets[0].insertRule("canvas:-webkit-full-screen {height: 100%; margin: 0 auto; object-fit: contain;}",0):-1!==a.indexOf("firefox")?document.styleSheets[0].insertRule("canvas:-moz-full-screen {height: 100%; margin: 0 auto; object-fit: contain;}",0):-1!==a.indexOf("opera")?
document.styleSheets[0].insertRule("canvas:-o-full-screen {height: 100%; margin: 0 auto; object-fit: contain;}",0):-1!==a.indexOf("msie")?document.styleSheets[0].insertRule("canvas:-ms-full-screen {height: 100%; margin: 0 auto; object-fit: contain;}",0):document.styleSheets[0].insertRule("canvas:fullscreen {height: 100%; margin: 0 auto; object-fit: contain;}",0)};c.enableFullscreen=function(a){a&&(a=Array.prototype.slice.call(arguments));c.alignFullscreen();c.canvas.addEventListener("mouseup",c.requestFullScreen,
!1);c.canvas.addEventListener("touchend",c.requestFullScreen,!1);a&&a.forEach(function(a){window.addEventListener("keyup",function(b){b.keyCode===a&&c.exitFullScreen();b.preventDefault()},!1)})};c.launchFullscreen=function(a){c.hitTestPoint(c.pointer.position,a)&&c.enableFullscreen()};c.scaleFullscreen=function(){document.fullscreenEnabled?(c.scale=c.fullscreenScale,c.pointer.scale=c.fullscreenScale):c.canvas.scaled||(c.scale=1,c.pointer.scale=1)};c.updateFunctions.push(c.scaleFullscreen);c.actx=
new AudioContext;c.makeSound=function(a,b){var d={},f=c.actx;d.volumeNode=c.actx.createGain();d.panNode=f.createStereoPanner?f.createStereoPanner():f.createPanner();d.delayNode=f.createDelay();d.feedbackNode=f.createGain();d.filterNode=f.createBiquadFilter();d.convolverNode=f.createConvolver();d.soundNode=null;d.buffer=null;d.source=null;d.loop=!1;d.playing=!1;d.loadHandler=void 0;d.panValue=0;d.volumeValue=1;d.startTime=0;d.startOffset=0;d.playbackRate=1;d.echo=!1;d.delayValue=.3;d.feebackValue=
.3;d.filterValue=0;d.reverb=!1;d.reverbImpulse=null;d.play=function(){d.startTime=f.currentTime;d.soundNode=f.createBufferSource();d.soundNode.buffer=d.buffer;d.soundNode.playbackRate.value=this.playbackRate;d.soundNode.connect(d.volumeNode);!1===d.reverb?d.volumeNode.connect(d.panNode):(d.volumeNode.connect(d.convolverNode),d.convolverNode.connect(d.panNode),d.convolverNode.buffer=d.reverbImpulse);d.panNode.connect(f.destination);d.echo&&(d.feedbackNode.gain.value=d.feebackValue,d.delayNode.delayTime.value=
d.delayValue,d.filterNode.frequency.value=d.filterValue,d.delayNode.connect(d.feedbackNode),0<d.filterValue?(d.feedbackNode.connect(d.filterNode),d.filterNode.connect(d.delayNode)):d.feedbackNode.connect(d.delayNode),d.volumeNode.connect(d.delayNode),d.delayNode.connect(d.panNode));d.soundNode.loop=d.loop;d.soundNode.start(0,d.startOffset%d.buffer.duration);d.playing=!0};d.pause=function(){d.playing&&(d.soundNode.stop(0),d.startOffset+=f.currentTime-d.startTime,d.playing=!1)};d.restart=function(){d.playing&&
d.soundNode.stop(0);d.startOffset=0;d.play()};d.playFrom=function(a){d.playing&&d.soundNode.stop(0);d.startOffset=a;d.play()};d.setEcho=function(a,b,c){void 0===a&&(a=.3);void 0===b&&(b=.3);void 0===c&&(c=0);d.delayValue=a;d.feebackValue=b;d.filterValue=c;d.echo=!0};d.setReverb=function(a,b,e){void 0===a&&(a=2);void 0===b&&(b=2);void 0===e&&(e=!1);d.reverbImpulse=c.impulseResponse(a,b,e,f);d.reverb=!0};d.fade=function(a,b){d.playing&&(d.volumeNode.gain.linearRampToValueAtTime(d.volumeNode.gain.value,
f.currentTime),d.volumeNode.gain.linearRampToValueAtTime(a,f.currentTime+b))};d.fadeIn=function(a){d.volumeNode.gain.value=0;d.fade(1,a)};d.fadeOut=function(a){d.fade(0,a)};Object.defineProperties(d,{volume:{get:function(){return d.volumeValue},set:function(a){d.volumeNode.gain.value=a;d.volumeValue=a},enumerable:!0,configurable:!0},pan:{get:function(){return f.createStereoPanner?d.panNode.pan.value:d.panValue},set:function(a){f.createStereoPanner?d.panNode.pan.value=a:(d.panNode.setPosition(a,0,
1-Math.abs(a)),d.panValue=a)},enumerable:!0,configurable:!0}});d.load=function(){var c=new XMLHttpRequest;c.open("GET",a,!0);c.responseType="arraybuffer";c.addEventListener("load",function(){f.decodeAudioData(c.response,function(a){d.buffer=a;d.hasLoaded=!0;b&&b()},function(a){throw Error("Audio could not be decoded: "+a);})});c.send()};d.load();return d};c.sound=function(a){return c.assets[a]};c.soundEffect=function(a,b,d,f,h,g,e,l,k,m,r,n,t){function v(a){var b=p.createConvolver();b.buffer=c.impulseResponse(t[0],
t[1],t[2],p);a.connect(b);b.connect(z)}function q(a){var b=p.createGain(),d=p.createDelay(),c=p.createBiquadFilter();d.delayTime.value=n[0];b.gain.value=n[1];n[2]&&(c.frequency.value=n[2]);d.connect(b);n[2]?(b.connect(c),c.connect(d)):b.connect(d);a.connect(d);d.connect(z)}function u(a){a.gain.value=0;a.gain.linearRampToValueAtTime(0,p.currentTime+e);a.gain.linearRampToValueAtTime(h,p.currentTime+e+b)}function w(a){a.gain.linearRampToValueAtTime(h,p.currentTime+b+e);a.gain.linearRampToValueAtTime(0,
p.currentTime+e+b+d)}function A(a){var c=a.frequency.value;k?(a.frequency.linearRampToValueAtTime(c,p.currentTime+e),a.frequency.linearRampToValueAtTime(c+l,p.currentTime+e+b+d)):(a.frequency.linearRampToValueAtTime(c,p.currentTime+e),a.frequency.linearRampToValueAtTime(c-l,p.currentTime+e+b+d))}function D(){var a=p.createOscillator(),c=p.createOscillator(),f=p.createGain(),g=p.createGain();f.gain.value=h;g.gain.value=h;a.connect(f);f.connect(p.destination);c.connect(g);g.connect(p.destination);a.type=
"sawtooth";c.type="sawtooth";a.frequency.value=C+r;c.frequency.value=C-r;0<b&&(u(f),u(g));0<d&&(w(f),w(g));0<l&&(A(a),A(c));n&&(q(f),q(g));t&&(v(f),v(g));a.start(p.currentTime+e);c.start(p.currentTime+e)}void 0===a&&(a=200);void 0===b&&(b=0);void 0===d&&(d=1);void 0===f&&(f="sine");void 0===h&&(h=1);void 0===g&&(g=0);void 0===e&&(e=0);void 0===l&&(l=0);void 0===k&&(k=!1);void 0===m&&(m=0);void 0===r&&(r=0);void 0===n&&(n=void 0);void 0===t&&(t=void 0);var p=c.actx;var x=p.createOscillator();var y=
p.createGain();var z=p.createStereoPanner?p.createStereoPanner():p.createPanner();x.connect(y);y.connect(z);z.connect(p.destination);y.gain.value=h;p.createStereoPanner?z.pan.value=g:z.setPosition(g,0,1-Math.abs(g));x.type=f;f=function(a,b){return Math.floor(Math.random()*(b-a+1))+a};var C=0<m?f(a-m/2,a+m/2):a;x.frequency.value=C;0<b&&u(y);w(y);0<l&&A(x);n&&q(y);t&&v(y);0<r&&D();x.start(p.currentTime+e)};c.impulseResponse=function(a,b,d,c){a*=c.sampleRate;c=c.createBuffer(2,a,c.sampleRate);for(var f=
c.getChannelData(0),g=c.getChannelData(1),e=0;e<a;e++){var l=d?a-e:e;f[e]=(2*Math.random()-1)*Math.pow(1-l/a,b);g[e]=(2*Math.random()-1)*Math.pow(1-l/a,b)}return c}};
